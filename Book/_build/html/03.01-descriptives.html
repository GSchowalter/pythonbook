
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5. Descriptive statistics &#8212; Learning Statistics with Python</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Drawing Graphs" href="03.02-drawing_graphs.html" />
    <link rel="prev" title="4. More Python Concepts" href="02.02-more_python_concepts.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Learning Statistics with Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="landingpage.html">
   Learning Statistics with Python
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Part I. Background
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="01.01-intro.html">
   1. Why do we learn statistics?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="01.02-studydesign.html">
   2. A brief introduction to research design
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Part II. An Introduction to Python
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="02.01-getting_started_with_python.html">
   3. Getting Started with Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="02.02-more_python_concepts.html">
   4. More Python Concepts
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Part III. Working With Data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   5. Descriptive statistics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03.02-drawing_graphs.html">
   6. Drawing Graphs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03.03-pragmatic_matters.html">
   7. Data Wrangling
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03.04-basic_programming.html">
   8. Basic Programming
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Part IV. Statistical Theory
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="04.01-intro-to-probability.html">
   9. Statistical theory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04.02-probability.html">
   10. Introduction to Probability
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04.03-estimation.html">
   11. Estimating unknown quantities from a sample
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04.04-hypothesis-testing.html">
   12. Hypothesis Testing
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Part V. Statistical Tools
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="05.01-chisquare.html">
   13. Categorical data analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05.02-ttest.html">
   14. Comparing Two Means
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05.03-anova.html">
   15. Comparing several means
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05.04-regression.html">
   17. Linear regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05.05-anova2.html">
   18. Factorial ANOVA
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Part VI. Endings, Alternatives and Prospects
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="06.01-bayes.html">
   19. Bayesian Statistics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06.02-epilogue.html">
   20. Epilogue
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bibliography.html">
   21. References
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/03.01-descriptives.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/ethanweed/pythonbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/ethanweed/pythonbook/issues/new?title=Issue%20on%20page%20%2F03.01-descriptives.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/ethanweed/pythonbook/https://github.com/ethanweed/pythonbook/tree/main/Chapters?urlpath=tree/03.01-descriptives.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measures-of-central-tendency">
   5.1. Measures of central tendency
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-mean">
     5.1.1. The mean
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculating-the-mean-in-python">
     5.1.2. Calculating the mean in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-median">
     5.1.3. The median
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mean-or-median-what-s-the-difference">
     5.1.4. Mean or median? What’s the difference?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-real-life-example">
     5.1.5. A real life example
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trimmed-mean">
     5.1.6. Trimmed mean
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mode">
     5.1.7. Mode
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measures-of-variability">
   5.2. Measures of variability
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#range">
     5.2.1. Range
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interquartile-range">
     5.2.2. Interquartile range
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mean-absolute-deviation">
     5.2.3. Mean absolute deviation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variance">
     5.2.4. Variance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#standard-deviation">
     5.2.5. Standard deviation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#median-absolute-deviation">
     5.2.6. Median absolute deviation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#which-measure-to-use">
     5.2.7. Which measure to use?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#skew-and-kurtosis">
   5.3. Skew and kurtosis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-an-overall-summary-of-a-variable">
   5.4. Getting an overall summary of a variable
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#describing-a-variable">
     5.4.1. “Describing” a variable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#describing-a-data-frame">
     5.4.2. “Describing” a data frame
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standard-scores">
   5.5. Standard scores
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#correlations">
   5.6. Correlations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-data">
     5.6.1. The data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-strength-and-direction-of-a-relationship">
     5.6.2. The strength and direction of a relationship
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-correlation-coefficient">
     5.6.3. The correlation coefficient
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculating-correlations-in-python">
     5.6.4. Calculating correlations in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interpreting-a-correlation">
     5.6.5. Interpreting a correlation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#handling-missing-values">
   5.7. Handling missing values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-single-variable-case">
     5.7.1. The single variable case
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#missing-values-in-pairwise-calculations">
     5.7.2. Missing values in pairwise calculations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   5.8. Summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#epilogue-good-descriptive-statistics-are-descriptive">
   5.9. Epilogue: Good descriptive statistics are descriptive!
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Descriptive statistics</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measures-of-central-tendency">
   5.1. Measures of central tendency
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-mean">
     5.1.1. The mean
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculating-the-mean-in-python">
     5.1.2. Calculating the mean in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-median">
     5.1.3. The median
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mean-or-median-what-s-the-difference">
     5.1.4. Mean or median? What’s the difference?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-real-life-example">
     5.1.5. A real life example
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#trimmed-mean">
     5.1.6. Trimmed mean
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mode">
     5.1.7. Mode
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#measures-of-variability">
   5.2. Measures of variability
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#range">
     5.2.1. Range
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interquartile-range">
     5.2.2. Interquartile range
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mean-absolute-deviation">
     5.2.3. Mean absolute deviation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variance">
     5.2.4. Variance
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#standard-deviation">
     5.2.5. Standard deviation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#median-absolute-deviation">
     5.2.6. Median absolute deviation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#which-measure-to-use">
     5.2.7. Which measure to use?
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#skew-and-kurtosis">
   5.3. Skew and kurtosis
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-an-overall-summary-of-a-variable">
   5.4. Getting an overall summary of a variable
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#describing-a-variable">
     5.4.1. “Describing” a variable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#describing-a-data-frame">
     5.4.2. “Describing” a data frame
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#standard-scores">
   5.5. Standard scores
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#correlations">
   5.6. Correlations
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-data">
     5.6.1. The data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-strength-and-direction-of-a-relationship">
     5.6.2. The strength and direction of a relationship
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-correlation-coefficient">
     5.6.3. The correlation coefficient
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calculating-correlations-in-python">
     5.6.4. Calculating correlations in Python
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#interpreting-a-correlation">
     5.6.5. Interpreting a correlation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#handling-missing-values">
   5.7. Handling missing values
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-single-variable-case">
     5.7.1. The single variable case
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#missing-values-in-pairwise-calculations">
     5.7.2. Missing values in pairwise calculations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   5.8. Summary
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#epilogue-good-descriptive-statistics-are-descriptive">
   5.9. Epilogue: Good descriptive statistics are descriptive!
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="descriptive-statistics">
<span id="descriptives"></span><h1><span class="section-number">5. </span>Descriptive statistics<a class="headerlink" href="#descriptive-statistics" title="Permalink to this headline">¶</a></h1>
<p>Any time that you get a new data set to look at, one of the first tasks that you have to do is find ways of summarising the data in a compact, easily understood fashion. This is what <strong><em>descriptive statistics</em></strong> (as opposed to inferential statistics) is all about. In fact, to many people the term “statistics” is synonymous with descriptive statistics. It is this topic that we’ll consider in this chapter, but before going into any details, let’s take a moment to get a sense of why we need descriptive statistics. To do this, let’s load the <code class="docutils literal notranslate"><span class="pre">afl_finalists.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">afl_margins.csv</span></code> files. Don’t worry about the Python code for now; we’ll get back to that. For now, we’ll focus on the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">afl_finalists</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/ethanweed/pythonbook/main/Data/afl_finalists.csv&#39;</span><span class="p">)</span>
<span class="n">afl_margins</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/ethanweed/pythonbook/main/Data/afl_margins.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>There are two variables here, <code class="docutils literal notranslate"><span class="pre">afl_finalists</span></code> and <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code>. We’ll focus a bit on these two variables in this chapter, so I’d better tell you what they are. Unlike most of data sets in this book, these are actually real data, relating to the Australian Football League (AFL) <a class="footnote-reference brackets" href="#note1" id="id1">1</a> The <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> variable contains the winning margin (number of points) for all 176 home and away games played during the 2010 season. The <code class="docutils literal notranslate"><span class="pre">afl_finalists</span></code> variable contains the names of all 400 teams that played in all 200 finals matches played during the period 1987 to 2010.  Let’s have a look at the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> variable:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>     afl.margins
0             56
1             31
2             56
3              8
4             32
..           ...
171           28
172           38
173           29
174           10
175           10

[176 rows x 1 columns]
</pre></div>
</div>
</div>
</div>
<p>This output doesn’t make it easy to get a sense of what the data are actually saying. Just “looking at the data” isn’t a terribly effective way of understanding data. In order to get some idea about what’s going on, we need to calculate some descriptive statistics (this chapter) and draw some nice pictures (next chapter). Since the descriptive statistics are the easier of the two topics, I’ll start with those, but nevertheless I’ll show you a histogram of the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> data, since it should help you get a sense of what the data we’re trying to describe actually look like. But for what it’s worth, this histogram was generated using the <code class="docutils literal notranslate"><span class="pre">histplot()</span></code> function from the <code class="docutils literal notranslate"><span class="pre">seaborn</span></code> package. We’ll talk a lot more about how to draw histograms in <a class="reference internal" href="03.02-drawing_graphs.html#drawinggraphs"><span class="std std-ref">Drawing Graphs</span></a>. For now, it’s enough to look at the histogram and note that it provides a fairly interpretable representation of the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> data.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">xlabel</span> <span class="o">=</span><span class="s2">&quot;Winning Margin&quot;</span><span class="p">,</span> 
                <span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;Frequency&quot;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">despine</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_5_0.png" src="_images/03.01-descriptives_5_0.png" />
</div>
</div>
<div class="figure align-default" id="fig-afl-margins" style="width: 600px">
<p class="caption"><span class="caption-number">Fig. 5.1 </span><span class="caption-text">A histogram of the AFL 2010 winning margin data (the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> variable). As you might expect, the larger the margin the less frequently you tend to see it.</span><a class="headerlink" href="#fig-afl-margins" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="measures-of-central-tendency">
<span id="central-tendency"></span><h2><span class="section-number">5.1. </span>Measures of central tendency<a class="headerlink" href="#measures-of-central-tendency" title="Permalink to this headline">¶</a></h2>
<p>Athough drawing pictures of the data, as I did in <a class="reference internal" href="#fig-afl-margins"><span class="std std-numref">Fig. 5.1</span></a> is an excellent way to convey the “gist” of what the data is trying to tell you, it’s often extremely useful to try to condense the data into a few simple “summary” statistics. In most situations, the first thing that you’ll want to calculate is a measure of <strong><em>central tendency</em></strong>. That is, you’d like to know something about the “average” or “middle” of your data lies. The two most commonly used measures are the mean, median and mode; occasionally people will also report a trimmed mean. I’ll explain each of these in turn, and then discuss when each of them is useful.</p>
<div class="section" id="the-mean">
<h3><span class="section-number">5.1.1. </span>The mean<a class="headerlink" href="#the-mean" title="Permalink to this headline">¶</a></h3>
<p>The <strong><em>mean</em></strong> of a set of observations is just a normal, old-fashioned average: add all of the values up, and then divide by the total number of values. The first five AFL margins were 56, 31, 56, 8 and 32, so the mean of these observations is just:</p>
<p><span class="math notranslate nohighlight">\(\frac{56 + 31 + 56 + 8 + 32}{5} = \frac{183}{5} = 36.60\)</span></p>
<p>Of course, this definition of the mean isn’t news to anyone: averages (i.e., means) are used so often in everyday life that this is pretty familiar stuff. However, since the concept of a mean is something that everyone already understands, I’ll use this as an excuse to start introducing some of the mathematical notation that statisticians use to describe this calculation, and talk about how the calculations would be done in Python.</p>
<p>The first piece of notation to introduce is <span class="math notranslate nohighlight">\(N\)</span>, which we’ll use to refer to the number of observations that we’re averaging (in this case <span class="math notranslate nohighlight">\(N = 5\)</span>). Next, we need to attach a label to the observations themselves. It’s traditional to use <span class="math notranslate nohighlight">\(X\)</span> for this, and to use subscripts to indicate which observation we’re actually talking about. That is, we’ll use <span class="math notranslate nohighlight">\(X_1\)</span> to refer to the first observation, <span class="math notranslate nohighlight">\(X_2\)</span> to refer to the second observation, and so on, all the way up to <span class="math notranslate nohighlight">\(X_N\)</span> for the last one. Or, to say the same thing in a slightly more abstract way, we use <span class="math notranslate nohighlight">\(X_i\)</span> to refer to the <span class="math notranslate nohighlight">\(i\)</span>-th observation. Just to make sure we’re clear on the notation, the following table lists the 5 observations in the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> variable, along with the mathematical symbol used to refer to it, and the actual value that the observation corresponds to:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>the observation</p></th>
<th class="text-align:left head"><p>its symbol</p></th>
<th class="text-align:left head"><p>the observed value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>winning margin, game 1</p></td>
<td class="text-align:left"><p><span class="math notranslate nohighlight">\(X_1\)</span></p></td>
<td class="text-align:left"><p>56 points</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>winning margin, game 2</p></td>
<td class="text-align:left"><p><span class="math notranslate nohighlight">\(X_2\)</span></p></td>
<td class="text-align:left"><p>31 points</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>winning margin, game 3</p></td>
<td class="text-align:left"><p><span class="math notranslate nohighlight">\(X_3\)</span></p></td>
<td class="text-align:left"><p>56 points</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>winning margin, game 4</p></td>
<td class="text-align:left"><p><span class="math notranslate nohighlight">\(X_4\)</span></p></td>
<td class="text-align:left"><p>8 points</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>winning margin, game 5</p></td>
<td class="text-align:left"><p><span class="math notranslate nohighlight">\(X_5\)</span></p></td>
<td class="text-align:left"><p>32 points</p></td>
</tr>
</tbody>
</table>
<p>Okay, now let’s try to write a formula for the mean. By tradition, we use <span class="math notranslate nohighlight">\(\bar{X}\)</span> as the notation for the mean. So the calculation for the mean could be expressed using the following formula:</p>
<p><span class="math notranslate nohighlight">\(\bar{X} = \frac{X_1 + X_2 + ... + X_{N-1} + X_N}{N}\)</span></p>
<p>This formula is entirely correct, but it’s terribly long, so we make use of the <strong><em>summation symbol</em></strong> <span class="math notranslate nohighlight">\(\scriptstyle\sum\)</span> to shorten it.<a class="footnote-reference brackets" href="#note2" id="id2">2</a> If I want to add up the first five observations, I could write out the sum the long way, <span class="math notranslate nohighlight">\(X_1 + X_2 + X_3 + X_4 +X_5\)</span> or I could use the summation symbol to shorten it to this:</p>
<p><span class="math notranslate nohighlight">\(\sum_{i=1}^5 X_i\)</span></p>
<p>Taken literally, this could be read as “the sum, taken over all <span class="math notranslate nohighlight">\(i\)</span> values from 1 to 5, of the value <span class="math notranslate nohighlight">\(X_i\)</span>”. But basically, what it means is “add up the first five observations”. In any case, we can use this notation to write out the formula for the mean, which looks like this:</p>
<p><span class="math notranslate nohighlight">\(\bar{X} = \frac{1}{N} \sum_{i=1}^N X_i\)</span></p>
<p>In all honesty, I can’t imagine that all this mathematical notation helps clarify the concept of the mean at all. In fact, it’s really just a fancy way of writing out the same thing I said in words: add all the values up, and then divide by the total number of items. However, that’s not really the reason I went into all that detail. My goal was to try to make sure that everyone reading this book is clear on the notation that we’ll be using throughout the book: <span class="math notranslate nohighlight">\(\bar{X}\)</span> for the mean, <span class="math notranslate nohighlight">\(\scriptstyle\sum\)</span> for the idea of summation, <span class="math notranslate nohighlight">\(X_i\)</span> for the <span class="math notranslate nohighlight">\(i\)</span>th observation, and <span class="math notranslate nohighlight">\(N\)</span> for the total number of observations. We’re going to be re-using these symbols a fair bit, so it’s important that you understand them well enough to be able to “read” the equations, and to be able to see that it’s just saying “add up lots of things and then divide by another thing”.</p>
</div>
<div class="section" id="calculating-the-mean-in-python">
<h3><span class="section-number">5.1.2. </span>Calculating the mean in Python<a class="headerlink" href="#calculating-the-mean-in-python" title="Permalink to this headline">¶</a></h3>
<p>Okay that’s the maths, how do we get the magic computing box to do the work for us? If you really wanted to, you could do this calculation directly in Python. For the first 5 AFL scores, do this just by typing it in as if Python were a calculator…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">56</span> <span class="o">+</span> <span class="mi">31</span> <span class="o">+</span> <span class="mi">56</span> <span class="o">+</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">32</span><span class="p">)</span> <span class="o">/</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>36.6
</pre></div>
</div>
</div>
</div>
<p>… in which case Python outputs the answer 36.6, just as if it were a calculator. However, that’s not the only way to do the calculations, and when the number of observations starts to become large, it’s easily the most tedious. Besides, in almost every real world scenario, you’ve already got the actual numbers stored in a variable of some kind, just like we have with the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> variable. Under those circumstances, what you want is a function that will just add up all the values stored in a numeric vector. That’s what the <code class="docutils literal notranslate"><span class="pre">sum()</span></code> function does. If we want to add up all 176 winning margins in the data set, we can do so using the following command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">margins</span> <span class="o">=</span> <span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">]</span>

<span class="nb">sum</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>6213
</pre></div>
</div>
</div>
</div>
<p>If we only want the sum of the first five observations, then we can use square brackets to pull out only the first five elements of the vector. So the command would now be:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    56
1    31
2    56
3     8
4    32
Name: afl.margins, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Observant readers will have noticed that to get the first 5 elements we need to ask for elements 0 through 5, which seems to make no sense whatsoever. Python can be weird like that. I am <strong>not</strong> going to get into this here, but I talked about it in the section on <a class="reference internal" href="02.02-more_python_concepts.html#lists"><span class="std std-ref">lists</span></a> and went into more detail in the section on <a class="reference internal" href="02.02-more_python_concepts.html#slices"><span class="std std-ref">slices</span></a>, and will probably mention it again in the section on <a class="reference internal" href="03.03-pragmatic_matters.html#indexingdataframes"><span class="std std-ref">pulling out the contents of a data frame</span></a>. To calculate the mean, we now tell Python to divide the output of this summation by five, so the command that we need to type now becomes the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">sum</span><span class="p">(</span><span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span><span class="o">/</span><span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>36.6
</pre></div>
</div>
</div>
</div>
<p>Or, we could just ask Python for the mean, without further ado:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>36.6
</pre></div>
</div>
</div>
</div>
<p>Now, as you may remember (you do remember, right?) I spent some time whinging back in <a class="reference internal" href="02.02-more_python_concepts.html#importinglibraries"><span class="std std-ref">the previous chapter</span></a> about how the Python developers were really mean because they gave us a built-in function for adding but not for averaging, and I made a big deal about how we had to import <code class="docutils literal notranslate"><span class="pre">statistics.mean</span></code>. So why, I hear you ask, can we all of sudden calculate means <em>without</em> importing <code class="docutils literal notranslate"><span class="pre">statistics.mean</span></code>?</p>
<p>As you may have already guessed<a class="footnote-reference brackets" href="#smartiepants" id="id3">3</a>, this is because the data we are working with are stored in a <a class="reference internal" href="03.03-pragmatic_matters.html#pandas"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe</span></a>, which means we are dealing with a different variable type here. We can confirm this, by checking what kind of variable <code class="docutils literal notranslate"><span class="pre">margins</span></code> actually is:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pandas.core.series.Series
</pre></div>
</div>
</div>
</div>
<p>Ah. <code class="docutils literal notranslate"><span class="pre">margins</span></code> is not a list, or an integer, or any of the other usual suspects. It is a special kind of type that is defined by the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> package, and like all variable types, it has its own set of special <a class="reference internal" href="02.02-more_python_concepts.html#methods"><span class="std std-ref">methods</span></a> that we can access using the <code class="docutils literal notranslate"><span class="pre">.</span></code> syntax. If you have been following along and entering the code on your own computer, then you can write <code class="docutils literal notranslate"><span class="pre">dir(margins)</span></code>, and you will see that <code class="docutils literal notranslate"><span class="pre">pandas.core.series.Series</span></code> variables have a long list of methods associated with them, and amongst them is both <code class="docutils literal notranslate"><span class="pre">sum</span></code> and <code class="docutils literal notranslate"><span class="pre">mean</span></code>.</p>
<p>If we were to convert <code class="docutils literal notranslate"><span class="pre">margins</span></code> to a different variable type, say, a list, then we could no longer use <code class="docutils literal notranslate"><span class="pre">.mean()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">Input In [10],</span> in <span class="ni">&lt;cell line: 2&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">a</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="ne">AttributeError</span>: &#39;list&#39; object has no attribute &#39;mean&#39;
</pre></div>
</div>
</div>
</div>
<p>In this case, we would have to take the longer route, by either converting our list <code class="docutils literal notranslate"><span class="pre">a</span></code> to a variable type with a <code class="docutils literal notranslate"><span class="pre">mean</span></code> method, such as a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> series, or by importing <code class="docutils literal notranslate"><span class="pre">statistics.mean</span></code> and using that directly on the list:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statistics</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>35.30113636363637
</pre></div>
</div>
</div>
</div>
<p>I said that Python was powerful. I never said it was easy, did I? Don’t worry, it gets easier with time<a class="footnote-reference brackets" href="#numb" id="id4">4</a></p>
<p>Here’s what we would do to calculate the mean for only the first five observations:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">margins</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>36.6
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-median">
<span id="median"></span><h3><span class="section-number">5.1.3. </span>The median<a class="headerlink" href="#the-median" title="Permalink to this headline">¶</a></h3>
<p>The second measure of central tendency that people use a lot is the <strong><em>median</em></strong>, and it’s even easier to describe than the mean. The median of a set of observations is just the middle value. As before let’s imagine we were interested only in the first 5 AFL winning margins: 56, 31, 56, 8 and 32. To figure out the median, we sort these numbers into ascending order:</p>
<div class="math notranslate nohighlight">
\[
8, 31, \mathbf{32}, 56, 56
\]</div>
<p>From inspection, it’s obvious that the median value of these 5 observations is 32, since that’s the middle one in the sorted list (I’ve put it in bold to make it even more obvious). Easy stuff. But what should we do if we were interested in the first 6 games rather than the first 5? Since the sixth game in the season had a winning margin of 14 points, our sorted list is now</p>
<div class="math notranslate nohighlight">
\[
8, 14, \mathbf{31}, \mathbf{32}, 56, 56
\]</div>
<p>and there are <em>two</em> middle numbers, 31 and 32. The median is defined as the average of those two numbers, which is of course 31.5. As before, it’s very tedious to do this by hand when you’ve got lots of numbers. To illustrate this, here’s what happens when you use Python to sort all 176 winning margins. First, I’ll use the <code class="docutils literal notranslate"><span class="pre">sort_values</span></code> method to display the winning margins in increasing numerical order. <a class="footnote-reference brackets" href="#note3" id="id5">5</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sorted_margins</span> <span class="o">=</span> <span class="n">afl_margins</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s1">&#39;afl.margins&#39;</span><span class="p">)</span>
<span class="n">sorted_margins</span><span class="p">[</span><span class="mi">84</span><span class="p">:</span><span class="mi">92</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>afl.margins</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>165</th>
      <td>29</td>
    </tr>
    <tr>
      <th>173</th>
      <td>29</td>
    </tr>
    <tr>
      <th>150</th>
      <td>29</td>
    </tr>
    <tr>
      <th>117</th>
      <td>30</td>
    </tr>
    <tr>
      <th>1</th>
      <td>31</td>
    </tr>
    <tr>
      <th>4</th>
      <td>32</td>
    </tr>
    <tr>
      <th>123</th>
      <td>32</td>
    </tr>
    <tr>
      <th>136</th>
      <td>33</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we peek at the middle of these sorted values, we can see that the middle values are 30 and 31, so the median winning margin for 2010 was 30.5 points. In real life, of course, no-one actually calculates the median by sorting the data and then looking for the middle value. In real life, we use the median command:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statistics</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>30.5
</pre></div>
</div>
</div>
</div>
<p>which outputs the median value of 30.5.</p>
<p>By the way, in the code above, I imported the <code class="docutils literal notranslate"><span class="pre">statistics</span></code> package (or module, or library, or whatever you like to call it). Actually, I didn’t really need to do that, because I had already done it earlier, when we used it to calculate the mean. Once a package is imported, Python will remember it, at least until your Python session is finished. But to make it easy to copy/paste code out of this book, I am going to try to remember to add the import commands every time (unless I forget, or it just seems unnecessary), but you won’t need to do this when you are writing your own code, and in fact it will just make your code messier if you do.</p>
</div>
<div class="section" id="mean-or-median-what-s-the-difference">
<h3><span class="section-number">5.1.4. </span>Mean or median? What’s the difference?<a class="headerlink" href="#mean-or-median-what-s-the-difference" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="fig-meanmedian">
<a class="reference internal image-reference" href="_images/meanmedian.png"><img alt="_images/meanmedian.png" src="_images/meanmedian.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5.2 </span><span class="caption-text">An illustration of the difference between how the mean and the median should be interpreted. The mean is basically the “centre of gravity” of the data set: if you imagine that the histogram of the data is a solid object, then the point on which you could balance it (as if on a see-saw) is the mean. In contrast, the median is the middle observation. Half of the observations are smaller, and half of the observations are larger.</span><a class="headerlink" href="#fig-meanmedian" title="Permalink to this image">¶</a></p>
</div>
<p>Knowing how to calculate means and medians is only a part of the story. You also need to understand what each one is saying about the data, and what that implies for when you should use each one. This is illustrated in <a class="reference internal" href="#fig-meanmedian"><span class="std std-numref">Fig. 5.2</span></a>. The mean is kind of like the “centre of gravity” of the data set, whereas the median is the “middle value” in the data. What this implies, as far as which one you should use, depends a little on what type of data you’ve got and what you’re trying to achieve. As a rough guide:</p>
<ul class="simple">
<li><p>If your data are nominal scale, you probably shouldn’t be using either the mean or the median. Both the mean and the median rely on the idea that the numbers assigned to values are meaningful. If the numbering scheme is arbitrary, then it’s probably best to use the <a class="reference internal" href="#mode"><span class="std std-ref">Mode</span></a> instead.</p></li>
<li><p>If your data are ordinal scale, you’re more likely to want to use the median than the mean. The median only makes use of the order information in your data (i.e., which numbers are bigger), but doesn’t depend on the precise numbers involved. That’s exactly the situation that applies when your data are ordinal scale. The mean, on the other hand, makes use of the precise numeric values assigned to the observations, so it’s not really appropriate for ordinal data.</p></li>
<li><p>For interval and ratio scale data, either one is generally acceptable. Which one you pick depends a bit on what you’re trying to achieve. The mean has the advantage that it uses all the information in the data (which is useful when you don’t have a lot of data), but it’s very sensitive to extreme values, as we’ll see when we look at <a class="reference internal" href="#trimmed-mean"><span class="std std-ref">trimmed means</span></a>.</p></li>
</ul>
<p>Let’s expand on that last part a little. One consequence is that there’s systematic differences between the mean and the median when the histogram is asymmetric (or “skewed”:  see the section on <a class="reference internal" href="#skew-and-kurtosis"><span class="std std-ref">skew and kurtosis</span></a>). This is illustrated in <a class="reference internal" href="#fig-meanmedian"><span class="std std-numref">Fig. 5.2</span></a>, above. Notice that the median (right hand side) is located closer to the “body” of the histogram, whereas the mean (left hand side) gets dragged towards the “tail” (where the extreme values are). To give a concrete example, suppose Bob (income $50,000), Kate (income $60,000) and Jane (income $65,000) are sitting at a table: the average income at the table is $58,333 and the median income is $60,000. Then Bill sits down with them (income $100,000,000). The average income has now jumped to $25,043,750 but the median rises only to $62,500. If you’re interested in looking at the overall income at the table, the mean might be the right answer; but if you’re interested in what counts as a typical income at the table, the median would be a better choice here.</p>
</div>
<div class="section" id="a-real-life-example">
<span id="housingpriceexample"></span><h3><span class="section-number">5.1.5. </span>A real life example<a class="headerlink" href="#a-real-life-example" title="Permalink to this headline">¶</a></h3>
<p>To try to get a sense of why you need to pay attention to the differences between the mean and the median, let’s consider a real life example. Since I tend to mock journalists for their poor scientific and statistical knowledge, I should give credit where credit is due. This is from an excellent article on the ABC news website <a class="footnote-reference brackets" href="#note4" id="id6">6</a> 24 September, 2010:</p>
<blockquote>
<div><p>Senior Commonwealth Bank executives have travelled the world in the past couple of weeks with a presentation showing how Australian house prices, and the key price to income ratios, compare favourably with similar countries. “Housing affordability has actually been going sideways for the last five to six years,” said Craig James, the chief economist of the bank’s trading arm, CommSec.</p>
</div></blockquote>
<p>This probably comes as a huge surprise to anyone with a mortgage, or who wants a mortgage, or pays rent, or isn’t completely oblivious to what’s been going on in the Australian housing market over the last several years. Back to the article:</p>
<blockquote>
<div><p>CBA has waged its war against what it believes are housing doomsayers with graphs, numbers and international comparisons. In its presentation, the bank rejects arguments that Australia’s housing is relatively expensive compared to incomes. It says Australia’s house price to household income ratio of 5.6 in the major cities, and 4.3 nationwide, is comparable to many other developed nations. It says San Francisco and New York have ratios of 7, Auckland’s is 6.7, and Vancouver comes in at 9.3.</p>
</div></blockquote>
<p>More excellent news! Except, the article goes on to make the observation that…</p>
<blockquote>
<div><p>Many analysts say that has led the bank to use misleading figures and comparisons. If you go to page four of CBA’s presentation and read the source information at the bottom of the graph and table, you would notice there is an additional source on the international comparison – Demographia. However, if the Commonwealth Bank had also used Demographia’s analysis of Australia’s house price to income ratio, it would have come up with a figure closer to 9 rather than 5.6 or 4.3</p>
</div></blockquote>
<p>That’s, um, a rather serious discrepancy. One group of people say 9, another says 4-5. Should we just split the difference, and say the truth lies somewhere in between? Absolutely not: this is a situation where there is a right answer and a wrong answer. Demographia are correct, and the Commonwealth Bank is incorrect. As the article points out</p>
<blockquote>
<div><p>[An] obvious problem with the Commonwealth Bank’s domestic price to income figures is they compare average incomes with median house prices (unlike the Demographia figures that compare median incomes to median prices). The median is the mid-point, effectively cutting out the highs and lows, and that means the average is generally higher when it comes to incomes and asset prices, because it includes the earnings of Australia’s wealthiest people. To put it another way: the Commonwealth Bank’s figures count Ralph Norris’ multi-million dollar pay packet on the income side, but not his (no doubt) very expensive house in the property price figures, thus understating the house price to income ratio for middle-income Australians.</p>
</div></blockquote>
<p>Couldn’t have put it better myself. The way that Demographia calculated the ratio is the right thing to do. The way that the Bank did it is incorrect. As for why an extremely quantitatively sophisticated organisation such as a major bank made such an elementary mistake, well… I can’t say for sure, since I have no special insight into their thinking, but the article itself does happen to mention the following facts, which may or may not be relevant:</p>
<blockquote>
<div><p>[As] Australia’s largest home lender, the Commonwealth Bank has one of the biggest vested interests in house prices rising. It effectively owns a massive swathe of Australian housing as security for its home loans as well as many small business loans.</p>
</div></blockquote>
<p>My, my.</p>
</div>
<div class="section" id="trimmed-mean">
<span id="id7"></span><h3><span class="section-number">5.1.6. </span>Trimmed mean<a class="headerlink" href="#trimmed-mean" title="Permalink to this headline">¶</a></h3>
<p>One of the fundamental rules of applied statistics is that the data are messy. Real life is never simple, and so the data sets that you obtain are never as straightforward as the statistical theory says. <a class="footnote-reference brackets" href="#note5" id="id8">7</a> This can have awkward consequences. To illustrate, consider this rather strange looking data set:</p>
<div class="math notranslate nohighlight">
\[
-100,2,3,4,5,6,7,8,9,10
\]</div>
<p>If you were to observe this in a real life data set, you’d probably suspect that something funny was going on with the <span class="math notranslate nohighlight">\(-100\)</span> value. It’s probably an <strong><em>outlier</em></strong>, a value that doesn’t really belong with the others. You might consider removing it from the data set entirely, and in this particular case I’d probably agree with that course of action. In real life, however, you don’t always get such cut-and-dried examples. For instance, you might get this instead:</p>
<div class="math notranslate nohighlight">
\[
-15,2,3,4,5,6,7,8,9,12
\]</div>
<p>The <span class="math notranslate nohighlight">\(-15\)</span> looks a bit suspicious, but not anywhere near as much as that <span class="math notranslate nohighlight">\(-100\)</span> did. In this case, it’s a little trickier. It <em>might</em> be a legitimate observation, it might not.</p>
<p>When faced with a situation where some of the most extreme-valued observations might not be quite trustworthy, the mean is not necessarily a good measure of central tendency. It is highly sensitive to one or two extreme values, and is thus not considered to be a <strong><em>robust</em></strong> measure. One remedy that we’ve seen is to use the median. A more general solution is to use a “trimmed mean”.  To calculate a trimmed mean, what you do is “discard” the most extreme examples on both ends (i.e., the largest and the smallest), and then take the mean of everything else. The goal is to preserve the best characteristics of the mean and the median: just like a median, you aren’t highly influenced by extreme outliers, but like the mean, you “use” more than one of the observations. Generally, we describe a trimmed mean in terms of the percentage of observation on either side that are discarded. So, for instance, a 10% trimmed mean discards the largest 10% of the observations <em>and</em> the smallest 10% of the observations, and then takes the mean of the remaining 80% of the observations. Not surprisingly, the 0% trimmed mean is just the regular mean, and the 50% trimmed mean is the median. In that sense, trimmed means provide a whole family of central tendency measures that span the range from the mean to the median.</p>
<p>For our toy example above, we have 10 observations, and so a 10% trimmed mean is calculated by ignoring the largest value (i.e., <code class="docutils literal notranslate"><span class="pre">12</span></code>) and the smallest value (i.e., <code class="docutils literal notranslate"><span class="pre">-15</span></code>) and taking the mean of the remaining values. First, let’s enter the data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">12</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Next, let’s calculate means and medians:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statistics</span>
<span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4.1
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">statistics</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5.5
</pre></div>
</div>
</div>
</div>
<p>That’s a fairly substantial difference, but I’m tempted to think that the mean is being influenced a bit too much by the extreme values at either end of the data set, especially the <span class="math notranslate nohighlight">\(-15\)</span> one. So let’s just try trimming the mean a bit. If I take a 10% trimmed mean <a class="footnote-reference brackets" href="#note6" id="id9">8</a>, we’ll drop the extreme values on either side, and take the mean of the rest:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

<span class="n">stats</span><span class="o">.</span><span class="n">trim_mean</span><span class="p">(</span><span class="n">dataset2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5.5
</pre></div>
</div>
</div>
</div>
<p>which in this case gives exactly the same answer as the median. Note that, to get a 10% trimmed mean you write <code class="docutils literal notranslate"><span class="pre">trim</span> <span class="pre">=</span> <span class="pre">.1</span></code>, not <code class="docutils literal notranslate"><span class="pre">trim</span> <span class="pre">=</span> <span class="pre">10</span></code>. In any case, let’s finish up by calculating the 5% trimmed mean for the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> data,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataset3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
<span class="n">stats</span><span class="o">.</span><span class="n">trim_mean</span><span class="p">(</span><span class="n">dataset3</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>33.75
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="mode">
<span id="id10"></span><h3><span class="section-number">5.1.7. </span>Mode<a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h3>
<p>The mode of a sample is very simple: it is the value that occurs most frequently. To illustrate the mode using the AFL data, let’s examine a different aspect to the data set. Who has played in the most finals? The <code class="docutils literal notranslate"><span class="pre">afl_finalists</span></code> data contains the name of every team that played in any AFL final from 1987-2010, so let’s have a look at it. To do this we will use the <code class="docutils literal notranslate"><span class="pre">head()</span></code> method. <code class="docutils literal notranslate"><span class="pre">head()</span></code> is a method that can be used when the data is contained in a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <code class="docutils literal notranslate"><span class="pre">dataframe</span></code> object (which ours is). It can be useful when you’re working with data with a lot of rows, since you can use it to tell you how many rows to return. There have been a lot of finals in this period so printing afl finalists using <code class="docutils literal notranslate"><span class="pre">print(afl_finalists)</span></code> will just fill us the screen. The command below tells Python we just want the first 25 rows of the dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">afl_finalists</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>afl.finalists</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Hawthorn</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Carlton</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Hawthorn</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Carlton</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Carlton</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Hawthorn</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Hawthorn</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Essendon</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Hawthorn</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Geelong</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Geelong</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Hawthorn</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Collingwood</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Melbourne</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Collingwood</td>
    </tr>
    <tr>
      <th>21</th>
      <td>West Coast</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Collingwood</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Essendon</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Collingwood</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There are actually 400 entries (aren’t you glad we didn’t print them all?). We <em>could</em> read through all 400, and count the number of occasions on which each team name appears in our list of finalists, thereby producing a <strong><em>frequency table</em></strong>. However, that would be mindless and boring: exactly the sort of task that computers are great at. So let’s use the <code class="docutils literal notranslate"><span class="pre">value_counts()</span></code> method to do this task for us:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">finalists</span> <span class="o">=</span> <span class="n">afl_finalists</span><span class="p">[</span><span class="s1">&#39;afl.finalists&#39;</span><span class="p">]</span>
<span class="n">finalists</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Geelong             39
West Coast          38
Essendon            32
Melbourne           28
Collingwood         28
North Melbourne     28
Hawthorn            27
Carlton             26
Adelaide            26
Sydney              26
Brisbane            25
St Kilda            24
Western Bulldogs    24
Port Adelaide       17
Richmond             6
Fremantle            6
Name: afl.finalists, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Now that we have our frequency table, we can just look at it and see that, over the 24 years for which we have data, Geelong has played in more finals than any other team. Thus, the mode of the <code class="docutils literal notranslate"><span class="pre">finalists</span></code> data is <code class="docutils literal notranslate"><span class="pre">&quot;Geelong&quot;</span></code>. If we want to extract the mode without inspecting the table, we can use the <code class="docutils literal notranslate"><span class="pre">statistics.mode</span></code> function to tell us which team has most often played in the finals.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">statistics</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="n">finalists</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Geelong&#39;
</pre></div>
</div>
</div>
</div>
<p>If we want to find the number of finals they have played in, we can e.g. first extract the frequencies with <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> and then find the largest value with <code class="docutils literal notranslate"><span class="pre">max</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">freq</span> <span class="o">=</span> <span class="n">finalists</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">freq</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>39
</pre></div>
</div>
</div>
</div>
<p>Taken together, we observe that Geelong (39 finals) played in more finals than any other team during the 1987-2010 period.</p>
<p>One last point to make with respect to the mode. While it’s generally true that the mode is most often calculated when you have nominal scale data (because means and medians are useless for those sorts of variables), there are some situations in which you really do want to know the mode of an ordinal, interval or ratio scale variable. For instance, let’s go back to thinking about our <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> variable. This variable is clearly ratio scale (if it’s not clear to you, it may help to re-read <a class="reference internal" href="01.02-studydesign.html#scales"><span class="std std-ref">Scales of measurement</span></a>), and so in most situations the mean or the median is the measure of central tendency that you want. But consider this scenario… a friend of yours is offering a bet. They pick a football game at random, and (without knowing who is playing) you have to guess the <em>exact</em> margin. If you guess correctly, you win $50. If you don’t, you lose $1. There are no consolation prizes for “almost” getting the right answer. You have to guess exactly the right margin. <a class="footnote-reference brackets" href="#note7" id="id11">9</a> For this bet, the mean and the median are completely useless to you. It is the mode that you should bet on. So, we calculate this modal value</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">statistics</span><span class="o">.</span><span class="n">mode</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">freq</span> <span class="o">=</span> <span class="n">margins</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">freq</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>8
</pre></div>
</div>
</div>
</div>
<p>So the 2010 data suggest you should bet on a 3 point margin, and since this was observed in 8 of the 176 game (4.5% of games) the odds are firmly in your favour.</p>
</div>
</div>
<div class="section" id="measures-of-variability">
<span id="variability"></span><h2><span class="section-number">5.2. </span>Measures of variability<a class="headerlink" href="#measures-of-variability" title="Permalink to this headline">¶</a></h2>
<p>The statistics that we’ve discussed so far all relate to <em>central tendency</em>. That is, they all talk about which values are “in the middle” or “popular” in the data. However, central tendency is not the only type of summary statistic that we want to calculate. The second thing that we really want is a measure of the <strong><em>variability</em></strong> of the data. That is, how “spread out” are the data? How “far” away from the mean or median do the observed values tend to be? For now, let’s assume that the data are interval or ratio scale, so we’ll continue to use the <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> data.  We’ll use this data to discuss several different measures of spread, each with different strengths and weaknesses.</p>
<div class="section" id="range">
<span id="id12"></span><h3><span class="section-number">5.2.1. </span>Range<a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h3>
<p>The <strong><em>range</em></strong> of a variable is very simple: it’s the biggest value minus the smallest value. For the AFL winning margins data, the maximum value is 116, and the minimum value is 0. We can calculate these values in Python using the <code class="docutils literal notranslate"><span class="pre">max()</span></code> and <code class="docutils literal notranslate"><span class="pre">min()</span></code> functions:</p>
<p><code class="docutils literal notranslate"><span class="pre">margins.max()</span></code><br />
<code class="docutils literal notranslate"><span class="pre">margins.min()</span></code></p>
<p>where I’ve omitted the output because it’s not interesting.</p>
<p>Although the range is the simplest way to quantify the notion of “variability”, it’s one of the worst. Recall from our discussion of the mean that we want our summary measure to be robust. If the data set has one or two extremely bad values in it, we’d like our statistics not to be unduly influenced by these cases. If we look once again at our toy example of a data set containing very extreme outliers…</p>
<div class="math notranslate nohighlight">
\[
-100,2,3,4,5,6,7,8,9,10
\]</div>
<p>… it is clear that the range is not robust, since this has a range of 110, but if the outlier were removed we would have a range of only 8.</p>
</div>
<div class="section" id="interquartile-range">
<span id="iqr"></span><h3><span class="section-number">5.2.2. </span>Interquartile range<a class="headerlink" href="#interquartile-range" title="Permalink to this headline">¶</a></h3>
<p>The <strong><em>interquartile range</em></strong> (IQR) is like the range, but instead of calculating the difference between the biggest and smallest value, it calculates the difference between the 25th quantile and the 75th quantile. Probably you already know what a <strong><em>quantile</em></strong> is (they’re more commonly called percentiles), but if not: the 10th percentile of a data set is the smallest number <span class="math notranslate nohighlight">\(x\)</span> such that 10% of the data is less than <span class="math notranslate nohighlight">\(x\)</span>. In fact, we’ve already come across the idea: the median of a data set is its 50th quantile / percentile! The <code class="docutils literal notranslate"><span class="pre">numpy</span></code> module actually provides you with a way of calculating quantiles, using the (surprise, surprise) <code class="docutils literal notranslate"><span class="pre">quantile()</span></code> function. Let’s use it to calculate the median AFL winning margin:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>30.5
</pre></div>
</div>
</div>
</div>
<p>And not surprisingly, this agrees with the answer that we saw earlier with the <code class="docutils literal notranslate"><span class="pre">median()</span></code> function. Now, we can actually input lots of quantiles at once, by specifying which quantiles we want. So lets do that, and get the 25th and 75th percentile:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">.75</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([12.75, 50.5 ])
</pre></div>
</div>
</div>
</div>
<p>And, by noting that <span class="math notranslate nohighlight">\(50.5 - 12.75 = 37.75\)</span>, we can see that the interquartile range for the 2010 AFL winning margins data is 37.75. Of course, that seems like too much work to do all that typing, and luckily we don’t have to, since the kind folks at <code class="docutils literal notranslate"><span class="pre">scipy</span></code> have already done the work for us and provided us with the  <code class="docutils literal notranslate"><span class="pre">iqr.stats</span></code> function, which will give us what we want.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="n">stats</span><span class="o">.</span><span class="n">iqr</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>37.75
</pre></div>
</div>
</div>
</div>
<p>While it’s obvious how to interpret the range, it’s a little less obvious how to interpret the IQR. The simplest way to think about it is like this: the interquartile range is the range spanned by the “middle half” of the data. That is, one quarter of the data falls below the 25th percentile, one quarter of the data is above the 75th percentile, leaving the “middle half” of the data lying in between the two. And the IQR is the range covered by that middle half.</p>
</div>
<div class="section" id="mean-absolute-deviation">
<span id="aad"></span><h3><span class="section-number">5.2.3. </span>Mean absolute deviation<a class="headerlink" href="#mean-absolute-deviation" title="Permalink to this headline">¶</a></h3>
<p>The two measures we’ve looked at so far, the range and the interquartile range, both rely on the idea that we can measure the spread of the data by looking at the quantiles of the data. However, this isn’t the only way to think about the problem. A different approach is to select a meaningful reference point (usually the mean or the median) and then report the “typical” deviations from that reference point. What do we mean by “typical” deviation? Usually, the mean or median value of these deviations! In practice, this leads to two different measures, the “mean absolute deviation (from the mean)” and the “median absolute deviation (from the median)”. From what I’ve read, the measure based on the median seems to be used in statistics, and does seem to be the better of the two, but to be honest I don’t think I’ve seen it used much in psychology. The measure based on the mean does occasionally show up in psychology though. In this section I’ll talk about the first one, and I’ll come back to talk about the second one later.</p>
<p>Since the previous paragraph might sound a little abstract, let’s go through the <strong><em>mean absolute deviation</em></strong> from the mean a little more slowly. One useful thing about this measure is that the name actually tells you exactly how to calculate it. Let’s think about our AFL winning margins data, and once again we’ll start by pretending that there’s only 5 games in total, with winning margins of 56, 31, 56, 8 and 32. Since our calculations rely on an examination of the deviation from some reference point (in this case the mean), the first thing we need to calculate is the mean, <span class="math notranslate nohighlight">\(\bar{X}\)</span>. For these five observations, our mean is <span class="math notranslate nohighlight">\(\bar{X} = 36.6\)</span>. The next step is to convert each of our observations <span class="math notranslate nohighlight">\(X_i\)</span> into a deviation score. We do this by calculating the difference between the observation <span class="math notranslate nohighlight">\(X_i\)</span> and the mean <span class="math notranslate nohighlight">\(\bar{X}\)</span>. That is, the deviation score is defined to be <span class="math notranslate nohighlight">\(X_i - \bar{X}\)</span>. For the first observation in our sample, this is equal to <span class="math notranslate nohighlight">\(56 - 36.6 = 19.4\)</span>. Okay, that’s simple enough. The next step in the process is to convert these deviations to absolute deviations. We do this by converting any negative values to positive ones. Mathematically, we would denote the absolute value of <span class="math notranslate nohighlight">\(-3\)</span> as <span class="math notranslate nohighlight">\(|-3|\)</span>, and so we say that <span class="math notranslate nohighlight">\(|-3| = 3\)</span>. We use the absolute value function here because we don’t really care whether the value is higher than the mean or lower than the mean, we’re just interested in how <em>close</em> it is to the mean. To help make this process as obvious as possible, the table below shows these calculations for all five observations:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><span class="math notranslate nohighlight">\(i\)</span> (which game)</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(X_i\)</span> (value)</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(X_i - \bar{X}\)</span> (deviation from mean)</p></th>
<th class="head"><p><span class="math notranslate nohighlight">\(|X_i - \bar{X}|\)</span> (absolute deviation)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>56</p></td>
<td><p>19.4</p></td>
<td><p>19.4</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>31</p></td>
<td><p>-5.6</p></td>
<td><p>5.6</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>56</p></td>
<td><p>19.4</p></td>
<td><p>19.4</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>8</p></td>
<td><p>-28.6</p></td>
<td><p>28.6</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>32</p></td>
<td><p>-4.6</p></td>
<td><p>4.6</p></td>
</tr>
</tbody>
</table>
<p>Now that we have calculated the absolute deviation score for every observation in the data set, all that we have to do to calculate the mean of these scores. Let’s do that:</p>
<div class="math notranslate nohighlight">
\[\frac{19.4 + 5.6 + 19.4 + 28.6 + 4.6}{5} = 15.52\]</div>
<p>And we’re done. The mean absolute deviation for these five scores is 15.52.</p>
<p>However, while our calculations for this little example are at an end, we do have a couple of things left to talk about. Firstly, we should really try to write down a proper mathematical formula. But in order do to this I need some mathematical notation to refer to the mean absolute deviation. Irritatingly, “mean absolute deviation” and “median absolute deviation” have the same acronym (MAD), which leads to a certain amount of ambiguity. To make matters worse, packages that include functions to calculate these things for you <em><strong>both use the abbreviation MAD even though they mean different things!</strong></em> Sigh. What I’ll do is use AAD instead, short for <em>average</em> absolute deviation. Now that we have some unambiguous notation, here’s the formula that describes what we just calculated:</p>
<div class="math notranslate nohighlight">
\[ADD\mbox{}(X) = \frac{1}{N} \sum_{i = 1}^N |X_i - \bar{X}|\]</div>
<p>The last thing we need to talk about is how to calculate AAD in Python. One possibility would be to do everything using low level commands, laboriously following the same steps that I used when describing the calculations above. However, that’s pretty tedious. You’d end up with a series of commands that might look like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">statistics</span> <span class="kn">import</span> <span class="n">mean</span>

<span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">32</span><span class="p">]</span>             <span class="c1"># 1. enter the data</span>
<span class="n">X_bar</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>                     <span class="c1"># 2. find the mean of the data</span>
<span class="n">AD</span> <span class="o">=</span> <span class="p">[]</span>                             <span class="c1"># 3. find the  absolute value of the difference between</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">X</span><span class="p">:</span>                         <span class="c1">#    each value and the mean and add it to the list AD    </span>
    <span class="n">AD</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">abs</span><span class="p">((</span><span class="n">i</span><span class="o">-</span><span class="n">X_bar</span><span class="p">)))</span>       
<span class="n">ADD</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">AD</span><span class="p">)</span>                      <span class="c1"># 4. find the mean of the absolute values</span>
<span class="n">ADD</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>15.52
</pre></div>
</div>
</div>
</div>
<p>Each of those commands is pretty simple, but there’s just too many of them. And because I find that to be too much typing, I suggest using the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> method <code class="docutils literal notranslate"><span class="pre">mad()</span></code> to make life easier. There is one important thing to notice, however: <code class="docutils literal notranslate"><span class="pre">pandas</span></code> will want the data to be in a different format, namely the simply and elegantly named <code class="docutils literal notranslate"><span class="pre">pandas.core.series.Series</span></code> format. Haha, just kidding. At least about the simple and elegant name. The format is great, though, and can do lots of things that ordinary lists can’t, so it is worth putting up with the name. To find the AAD, we can just do:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="p">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">32</span><span class="p">])</span>
<span class="n">data</span><span class="o">.</span><span class="n">mad</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>15.52
</pre></div>
</div>
</div>
</div>
<p>Ok, I lied again. There is more than one thing to notice (when isn’t there?). <code class="docutils literal notranslate"><span class="pre">pandas</span></code> calls this the “MAD”. And, as we have seen, this is <em>also</em> the acronym for the <em>median absolute difference</em>. To find the median absolute difference, we can use the <code class="docutils literal notranslate"><span class="pre">robust</span></code> module from the <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> package, which has a function called, you guessed it, <code class="docutils literal notranslate"><span class="pre">mad</span></code>. Except this time the “m” in “MAD” stand for “median” and not “mean”. Haha, isn’t naming fun?</p>
<p>We’ll talk more about <a class="reference internal" href="#mad"><span class="std std-ref">median absolute deviation</span></a> below. For now, just be careful to be aware of which one you are using, and why, and everything will be ok!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">statsmodels</span> <span class="kn">import</span> <span class="n">robust</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span> <span class="p">[</span><span class="mi">56</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">32</span><span class="p">])</span>
<span class="n">pandas_mad</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mad</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">56</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">32</span><span class="p">])</span>
<span class="n">statsmodels_mad</span> <span class="o">=</span> <span class="n">robust</span><span class="o">.</span><span class="n">mad</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pandas MAD is the mean absolute deviation:&quot;</span><span class="p">,</span> <span class="n">pandas_mad</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Statsmodels MAD is the median absolute deviation:&quot;</span><span class="p">,</span> <span class="n">statsmodels_mad</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pandas MAD is the mean absolute deviation: 15.52
Statsmodels MAD is the median absolute deviation: 24.0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="variance">
<span id="var"></span><h3><span class="section-number">5.2.4. </span>Variance<a class="headerlink" href="#variance" title="Permalink to this headline">¶</a></h3>
<p>Although mean absolute deviation measure has its uses, it’s not the best measure of variability to use. From a purely mathematical perspective, there are some solid reasons to prefer squared deviations rather than absolute deviations. If we do that, we obtain a measure is called the <strong><em>variance</em></strong>, which has a lot of really nice statistical properties that I’m going to ignore, <a class="footnote-reference brackets" href="#note8" id="id13">10</a> and one massive psychological flaw that I’m going to make a big deal out of in a moment. The variance of a data set <span class="math notranslate nohighlight">\(X\)</span> is sometimes written as <span class="math notranslate nohighlight">\(\mbox{Var}(X)\)</span> but it’s more commonly denoted <span class="math notranslate nohighlight">\(s^2\)</span> (the reason for this will become clearer shortly). The formula that we use to calculate the variance of a set of observations is as follows:</p>
<div class="math notranslate nohighlight">
\[
\mbox{Var}(X) = \frac{1}{N} \sum_{i=1}^N \left( X_i - \bar{X} \right)^2
\]</div>
<p>As you can see, it’s basically the same formula that we used to calculate the mean absolute deviation, except that instead of using “absolute deviations” we use “squared deviations”. It is for this reason that the variance is sometimes referred to as the “mean square deviation”.</p>
<p>Now that we’ve got the basic idea, let’s have a look at a concrete example. Once again, let’s use the first five AFL games as our data. If we follow the same approach that we took last time, we end up with the following table:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p>which game</p></th>
<th class="text-align:center head"><p>value</p></th>
<th class="text-align:center head"><p>deviation from mean</p></th>
<th class="text-align:center head"><p>squared deviation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>1</p></td>
<td class="text-align:center"><p>56</p></td>
<td class="text-align:center"><p>19.4</p></td>
<td class="text-align:center"><p>376.36</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>2</p></td>
<td class="text-align:center"><p>31</p></td>
<td class="text-align:center"><p>-5.6</p></td>
<td class="text-align:center"><p>31.36</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>3</p></td>
<td class="text-align:center"><p>56</p></td>
<td class="text-align:center"><p>19.4</p></td>
<td class="text-align:center"><p>376.36</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>4</p></td>
<td class="text-align:center"><p>8</p></td>
<td class="text-align:center"><p>-28.6</p></td>
<td class="text-align:center"><p>817.96</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>5</p></td>
<td class="text-align:center"><p>32</p></td>
<td class="text-align:center"><p>-4.6</p></td>
<td class="text-align:center"><p>21.16</p></td>
</tr>
</tbody>
</table>
<p>The same table again, translated into Math-ese, looks like this:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p><em>i</em></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\(X_i\)</span></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\(X_i - \bar{X}\)</span></p></th>
<th class="text-align:center head"><p><span class="math notranslate nohighlight">\((X_i - \bar{X}\)</span>)<span class="math notranslate nohighlight">\(^2\)</span></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>1</p></td>
<td class="text-align:center"><p>56</p></td>
<td class="text-align:center"><p>19.4 ㅤㅤ</p></td>
<td class="text-align:center"><p>376.36 ㅤㅤ</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>2</p></td>
<td class="text-align:center"><p>31</p></td>
<td class="text-align:center"><p>-5.6 ㅤㅤ</p></td>
<td class="text-align:center"><p>31.36  ㅤㅤ</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>3</p></td>
<td class="text-align:center"><p>56</p></td>
<td class="text-align:center"><p>19.4 ㅤㅤ</p></td>
<td class="text-align:center"><p>376.36 ㅤㅤ</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>4</p></td>
<td class="text-align:center"><p>8</p></td>
<td class="text-align:center"><p>-28.6 ㅤㅤ</p></td>
<td class="text-align:center"><p>817.96 ㅤㅤ</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>5</p></td>
<td class="text-align:center"><p>32</p></td>
<td class="text-align:center"><p>-4.6 ㅤㅤ</p></td>
<td class="text-align:center"><p>21.16  ㅤㅤ</p></td>
</tr>
</tbody>
</table>
<p>That last column contains all of our squared deviations, so all we have to do is average them. If we do that by typing all the numbers into Python by hand…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span> <span class="mf">376.36</span> <span class="o">+</span> <span class="mf">31.36</span> <span class="o">+</span> <span class="mf">376.36</span> <span class="o">+</span> <span class="mf">817.96</span> <span class="o">+</span> <span class="mf">21.16</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>324.64
</pre></div>
</div>
</div>
</div>
<p>… we end up with a variance of 324.64. Exciting, isn’t it? For the moment, let’s ignore the burning question that you’re all probably thinking (i.e., what the heck does a variance of 324.64 actually mean?) and instead talk a bit more about how to do the calculations in Python, because this will reveal something very weird.</p>
<p>As always, we want to avoid having to type in a whole lot of numbers ourselves, and fortunately the <code class="docutils literal notranslate"><span class="pre">statistics</span></code> module provides a function called <code class="docutils literal notranslate"><span class="pre">variance</span></code> which saves us the trouble. And as it happens, we have the values lying around in the variable <code class="docutils literal notranslate"><span class="pre">data</span></code>, which we created in the previous section. With this in mind, we can just calculate the variance of <code class="docutils literal notranslate"><span class="pre">data</span></code> by using the following command</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statistics</span>

<span class="n">statistics</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>405
</pre></div>
</div>
</div>
</div>
<p>and you get the same… no, wait… you get a completely different answer. That’s just weird. Is Python broken? Is this a typo? Is Dan an idiot?
As it happens, the answer is no<a class="footnote-reference brackets" href="#note9" id="id14">11</a>. It’s not a typo, and Python is not making a mistake. To get a feel for what’s happening, let’s stop using the tiny data set containing only 5 data points, and switch to the full set of 176 games that we’ve got stored in our  <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> vector. First, let’s calculate the variance by using the formula that I described above:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statistics</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">])</span>
<span class="n">v</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">]:</span>
    <span class="n">squared_error</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="n">m</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">v</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">squared_error</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>675.9718168904958
</pre></div>
</div>
</div>
</div>
<p>Now let’s use the <code class="docutils literal notranslate"><span class="pre">statistics.variance()</span></code> function:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">statistics</span>

<span class="n">var</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">])</span>

<span class="n">var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>679.834512987013
</pre></div>
</div>
</div>
</div>
<p>Hm. These two numbers are very similar this time. That seems like too much of a coincidence to be a mistake. And of course it isn’t a mistake. In fact, it’s very simple to explain what Python is doing here, but slightly trickier to explain <em>why</em> Python is doing it. So let’s start with the “what”. What Python is doing is evaluating a slightly different formula to the one I showed you above. Instead of averaging the squared deviations, which requires you to divide by the number of data points <span class="math notranslate nohighlight">\(N\)</span>, Python has chosen to divide by <span class="math notranslate nohighlight">\(N-1\)</span>. In other words, the formula that Python is using is this one</p>
<div class="math notranslate nohighlight">
\[\frac{1}{N-1} \sum_{i=1}^N \left( X_i - \bar{X} \right)^2\]</div>
<p>So that’s the <em>what</em>. The real question is <em>why</em> Python is dividing by <span class="math notranslate nohighlight">\(N-1\)</span> and not by <span class="math notranslate nohighlight">\(N\)</span>. After all, the variance is supposed to be the <em>mean</em> squared deviation, right? So shouldn’t we be dividing by <span class="math notranslate nohighlight">\(N\)</span>, the actual number of observations in the sample? Well, yes, we should. However, as we’ll discuss in the section on <a class="reference internal" href="04.03-estimation.html#estimation"><span class="std std-ref">estimation</span></a>, there’s a subtle distinction between “describing a sample” and “making guesses about the population from which the sample came”. Up to this point, it’s been a distinction without a difference. Regardless of whether you’re describing a sample or drawing inferences about the population, the mean is calculated exactly the same way. Not so for the variance, or the standard deviation, or for many other measures besides. What I outlined to you initially (i.e., take the actual average, and thus divide by <span class="math notranslate nohighlight">\(N\)</span>) assumes that you literally intend to calculate the variance of the sample. Most of the time, however, you’re not terribly interested in the sample <em>in and of itself</em>. Rather, the sample exists to tell you something about the world. If so, you’re actually starting to move away from calculating a “sample statistic”, and towards the idea of estimating a “population parameter”. However, I’m getting ahead of myself. For now, let’s just take it on faith that Python knows what it’s doing, and we’ll revisit the question later on when we talk about <a class="reference internal" href="04.03-estimation.html#estimation"><span class="std std-ref">estimation</span></a>.</p>
<p>By the way, if you <em>do</em> want to calculate variance and divide by <span class="math notranslate nohighlight">\(N\)</span> and not <span class="math notranslate nohighlight">\(N-1\)</span>, Python does a have a way to do this as well; you just need to ask for <code class="docutils literal notranslate"><span class="pre">pvariance()</span></code> instead of <code class="docutils literal notranslate"><span class="pre">variance()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">population_variance</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">pvariance</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">])</span>
<span class="n">sample_variance</span> <span class="o">=</span> <span class="n">statistics</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;statistics.pvariance divides by N: &quot;</span><span class="p">,</span> <span class="n">population_variance</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;statistics.variance divide by N-1: &quot;</span><span class="p">,</span> <span class="n">sample_variance</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>statistics.pvariance divides by N:  675.9718168904959
statistics.variance divide by N-1:  679.834512987013
</pre></div>
</div>
</div>
</div>
<p>Okay, one last thing. This section so far has read a bit like a mystery novel. I’ve shown you how to calculate the variance, described the weird “<span class="math notranslate nohighlight">\(N-1\)</span>” thing that Python does and hinted at the reason why it’s there, but I haven’t mentioned the single most important thing… how do you <em>interpret</em> the variance? Descriptive statistics are supposed to describe things, after all, and right now the variance is really just a gibberish number. Unfortunately, the reason why I haven’t given you the human-friendly interpretation of the variance is that there really isn’t one. This is the most serious problem with the variance. Although it has some elegant mathematical properties that suggest that it really is a fundamental quantity for expressing variation, it’s completely useless if you want to communicate with an actual human… variances are completely uninterpretable in terms of the original variable! All the numbers have been squared, and they don’t mean anything anymore. This is a huge issue. For instance, according to the table I presented earlier, the margin in game 1 was “376.36 points-squared higher than the average margin”. This is <em>exactly</em> as stupid as it sounds; and so when we calculate a variance of 324.64, we’re in the same situation. I’ve watched a lot of footy games, and never has anyone referred to “points squared”. It’s <em>not</em> a real unit of measurement, and since the variance is expressed in terms of this gibberish unit, it is totally meaningless to a human.</p>
</div>
<div class="section" id="standard-deviation">
<span id="sd"></span><h3><span class="section-number">5.2.5. </span>Standard deviation<a class="headerlink" href="#standard-deviation" title="Permalink to this headline">¶</a></h3>
<p>Okay, suppose that you like the idea of using the variance because of those nice mathematical properties that I haven’t talked about, but – since you’re a human and not a robot – you’d like to have a measure that is expressed in the same units as the data itself (i.e., points, not points-squared). What should you do? The solution to the problem is obvious: take the square root of the variance, known as the <strong><em>standard deviation</em></strong>, also called the “root mean squared deviation”, or RMSD. This solves our problem fairly neatly: while nobody has a clue what “a variance of 324.68 points-squared” really means, it’s much easier to understand “a standard deviation of 18.01 points”, since it’s expressed in the original units. It is traditional to refer to the standard deviation of a sample of data as <span class="math notranslate nohighlight">\(s\)</span>, though 	“sd” and “std dev.” are also used at times. Because the standard deviation is equal to the square root of the variance, you probably won’t be surprised to see that the formula is:</p>
<div class="math notranslate nohighlight">
\[
s = \sqrt{ \frac{1}{N} \sum_{i=1}^N \left( X_i - \bar{X} \right)^2 }
\]</div>
<p>and the function that we use to calculate it is <code class="docutils literal notranslate"><span class="pre">stdev()</span></code>. However, as you might have guessed from our discussion of the variance, what Python actually calculates is slightly different to the formula given above. Just like the we saw with the variance, what Python calculates is a version that divides by <span class="math notranslate nohighlight">\(N-1\)</span> rather than <span class="math notranslate nohighlight">\(N\)</span>. For reasons that will make sense when we return to this topic in the chapter on <a class="reference internal" href="04.03-estimation.html#estimation"><span class="std std-ref">estimation</span></a>, I’ll refer to this new quantity as <span class="math notranslate nohighlight">\(\hat\sigma\)</span> (read as: “sigma hat”), and the formula for this is</p>
<div class="math notranslate nohighlight">
\[
\hat\sigma = \sqrt{ \frac{1}{N-1} \sum_{i=1}^N \left( X_i - \bar{X} \right)^2 }
\]</div>
<p>With that in mind, calculating standard deviations in Python is simple:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">statistics</span><span class="o">.</span><span class="n">stdev</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>26.073636359108274
</pre></div>
</div>
</div>
</div>
<p>Interpreting standard deviations is slightly more complex. Because the standard deviation is derived from the variance, and the variance is a quantity that has little to no meaning that makes sense to us humans, the standard deviation doesn’t have a simple interpretation. As a consequence, most of us just rely on a simple rule of thumb: in general, you should expect 68% of the data to fall within 1 standard deviation of the mean, 95% of the data to fall within 2 standard deviation of the mean, and 99.7% of the data to fall within 3 standard deviations of the mean. This rule tends to work pretty well most of the time, but it’s not exact: it’s actually calculated based on an <em>assumption</em> that the histogram is symmetric and “bell shaped”. <a class="footnote-reference brackets" href="#note10" id="id15">12</a> As you can tell from looking at the AFL winning margins histogram in <a class="reference internal" href="#fig-aflsd"><span class="std std-numref">Fig. 5.3</span></a>, this isn’t exactly true of our data! Even so, the rule is approximately correct. As it turns out, 65.3% of the AFL margins data fall within one standard deviation of the mean. This is shown visually in <a class="reference internal" href="#fig-aflsd"><span class="std std-numref">Fig. 5.3</span></a>.</p>
<div class="figure align-center" id="fig-aflsd">
<a class="reference internal image-reference" href="_images/figure_2.5_mean_SD.png"><img alt="_images/figure_2.5_mean_SD.png" src="_images/figure_2.5_mean_SD.png" style="width: 600px;" /></a>
<p class="caption"><span class="caption-number">Fig. 5.3 </span><span class="caption-text">An illustration of the standard deviation, applied to the AFL winning margins data. The shaded bars in the histogram show how much of the data fall within one standard deviation of the mean. In this case, 65.3% of the data set lies within this range, which is pretty consistent with the “approximately 68% rule” discussed in the main text.</span><a class="headerlink" href="#fig-aflsd" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="median-absolute-deviation">
<span id="mad"></span><h3><span class="section-number">5.2.6. </span>Median absolute deviation<a class="headerlink" href="#median-absolute-deviation" title="Permalink to this headline">¶</a></h3>
<p>The last measure of variability that I want to talk about is the <strong><em>median absolute deviation</em></strong> (MAD). The basic idea behind MAD is very simple: it’s just the median of the absolute deviations from the median of the data. Find the distance of each data point from the median of all the data points (ignoring the signs), and then take the median of that.</p>
<p>This has a straightforward interpretation: every observation in the data set lies some distance away from the typical value (the median). So the MAD is an attempt to describe a <em>typical deviation from a typical value</em> in the data set. It wouldn’t be unreasonable to interpret the MAD value of 19.5 for our AFL data by saying something like this:</p>
<blockquote>
<div><p>The median winning margin in 2010 was 30.5, indicating that a typical game involved a winning margin of about 30 points. However, there was a fair amount of variation from game to game: the MAD value was 19.5, indicating that a typical winning margin would differ from this median value by about 19-20 points.</p>
</div></blockquote>
<p>As you’d expect, Python has a method for calculating MAD. It is in the <code class="docutils literal notranslate"><span class="pre">robust</span></code> object from the <code class="docutils literal notranslate"><span class="pre">statsmodels</span></code> package, and you will be shocked no doubt to hear that it’s called <code class="docutils literal notranslate"><span class="pre">mad()</span></code>. However, it’s a little bit more complicated than the functions that we’ve been using previously. If you want to use it to calculate MAD in the exact same way that I have described it above, the command that you need to use specifies two arguments: the data set itself <code class="docutils literal notranslate"><span class="pre">x</span></code>, and a <code class="docutils literal notranslate"><span class="pre">constant</span></code> that I’ll explain in a moment. For our purposes, the constant is 1, so our command becomes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">statsmodels</span> <span class="kn">import</span> <span class="n">robust</span>

<span class="n">robust</span><span class="o">.</span><span class="n">mad</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>19.5
</pre></div>
</div>
</div>
</div>
<p>Apart from the weirdness of having to type that <code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">1</span></code> part, this is pretty straightforward.</p>
<p>Okay, so what exactly is this <code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">1</span></code> argument? I won’t go into all the details here, but here’s the gist. Although the “raw” MAD value that I’ve described above is completely interpretable on its own terms, that’s not actually how it’s used in a lot of real world contexts. Instead, what happens a lot is that the researcher <em>actually</em> wants to calculate the standard deviation. However, in the same way that the mean is very sensitive to extreme values, the standard deviation is vulnerable to the exact same issue. So, in much the same way that people sometimes use the median as a “robust” way of calculating “something that is like the mean”, it’s not uncommon to use MAD as a method for calculating “something that is like the standard deviation”. Unfortunately, the <em>raw</em> MAD value doesn’t do this. Our raw MAD value is 19.5, and our standard deviation was 26.07. However, what some clever person has shown is that, under certain assumptions (the assumption again being that the data are normally-distributed!), you can multiply the raw MAD value by 1.4826 and obtain a number that is directly comparable to the standard deviation. As a consequence, the default value of <code class="docutils literal notranslate"><span class="pre">constant</span></code> is 1.4826, and so when you use the <code class="docutils literal notranslate"><span class="pre">mad()</span></code> command without manually setting a value, here’s what you get:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">robust</span><span class="o">.</span><span class="n">mad</span><span class="p">(</span><span class="n">margins</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>28.91074326085924
</pre></div>
</div>
</div>
</div>
<p>I should point out, though, that if you want to use this “corrected” MAD value as a robust version of the standard deviation, you really are relying on the assumption that the data are (or at least, are “supposed to be” in some sense) symmetric and basically shaped like a bell curve. That’s really <em>not</em> true for our <code class="docutils literal notranslate"><span class="pre">afl_margins</span></code> data, so in this case I wouldn’t try to use the MAD value this way.</p>
</div>
<div class="section" id="which-measure-to-use">
<h3><span class="section-number">5.2.7. </span>Which measure to use?<a class="headerlink" href="#which-measure-to-use" title="Permalink to this headline">¶</a></h3>
<p>We’ve discussed quite a few measures of spread (range, IQR, MAD, variance and standard deviation), and hinted at their strengths and weaknesses. Here’s a quick summary:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#range"><span class="std std-ref"><em>Range</em></span></a>. Gives you the full spread of the data. It’s very vulnerable to outliers, and as a consequence it isn’t often used unless you have good reasons to care about the extremes in the data.</p></li>
<li><p><a class="reference internal" href="#iqr"><span class="std std-ref"><em>Interquartile range</em></span></a>. Tells you where the “middle half” of the data sits. It’s pretty robust, and complements the median nicely. This is used a lot.</p></li>
<li><p><a class="reference internal" href="#aad"><span class="std std-ref"><em>Mean absolute deviation</em></span></a>. Tells you how far “on average” the observations are from the mean. It’s very interpretable, but has a few minor issues (not discussed here) that make it less attractive to statisticians than the standard deviation. Used sometimes, but not often.</p></li>
<li><p><a class="reference internal" href="#var"><span class="std std-ref"><em>Variance</em></span></a>. Tells you the average squared deviation from the mean. It’s mathematically elegant, and is probably the “right” way to describe variation around the mean, but it’s completely uninterpretable because it doesn’t use the same units as the data. Almost never used except as a mathematical tool; but it’s buried “under the hood” of a very large number of statistical tools.</p></li>
<li><p><a class="reference internal" href="#sd"><span class="std std-ref"><em>Standard deviation</em></span></a>. This is the square root of the variance. It’s fairly elegant mathematically, and it’s expressed in the same units as the data so it can be interpreted pretty well. In situations where the mean is the measure of central tendency, this is the default. This is by far the most popular measure of variation.</p></li>
<li><p><a class="reference internal" href="#mad"><span class="std std-ref"><em>Median absolute deviation</em></span></a>. The typical (i.e., median) deviation from the median value. In the raw form it’s simple and interpretable; in the corrected form it’s a robust way to estimate the standard deviation, for some kinds of data sets. Not used very often, but it does get reported sometimes.</p></li>
</ul>
<p>In short, the IQR and the standard deviation are easily the two most common measures used to report the variability of the data; but there are situations in which the others are used. I’ve described all of them in this book because there’s a fair chance you’ll run into most of these somewhere.</p>
</div>
</div>
<div class="section" id="skew-and-kurtosis">
<span id="id16"></span><h2><span class="section-number">5.3. </span>Skew and kurtosis<a class="headerlink" href="#skew-and-kurtosis" title="Permalink to this headline">¶</a></h2>
<p>There are two more descriptive statistics that you will sometimes see reported in the psychological literature, known as skew and kurtosis. In practice, neither one is used anywhere near as frequently as the measures of central tendency and variability that we’ve been talking about. Skew is pretty important, so you do see it mentioned a fair bit; but I’ve actually never seen kurtosis reported in a scientific article to date.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">chdir</span> <span class="k">as</span> <span class="n">cd</span>

<span class="c1"># load some data</span>
<span class="n">pathin</span> <span class="o">=</span> <span class="s1">&#39;/Users/ethan/Documents/GitHub/pythonbook/Data/&#39;</span>
<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;skewdata.csv&#39;</span>

<span class="n">cd</span><span class="p">(</span><span class="n">pathin</span><span class="p">)</span>

<span class="n">df_skew</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="c1"># plot histograms of the data</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df_skew</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Values&quot;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s2">&quot;Skew&quot;</span><span class="p">,</span>
        <span class="n">binwidth</span><span class="o">=</span><span class="mf">.02</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">facet_kws</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">margin_titles</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># This is just for the purposes of putting this figure in this book. Feel free to ignore!</span>
<span class="c1">#glue(&quot;skew_fig&quot;, ax, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_99_1.png" src="_images/03.01-descriptives_99_1.png" />
</div>
</div>
<div class="figure align-default" id="fig-skew" style="width: 600px">
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x15feaa830&gt;
</pre></div>
</div>
</div>
<p class="caption"><span class="caption-number">Fig. 5.4 </span><span class="caption-text">An illustration of skewness. On the left we have a negatively skewed data set (skewness “  ́.93), in the middle we have a data set with no skew (technically, skewness “  ́.006), and on the right we have a positively skewed data set (skewness “ .93).</span><a class="headerlink" href="#fig-skew" title="Permalink to this image">¶</a></p>
</div>
<p>Since it’s the more interesting of the two, let’s start by talking about the <strong><em>skewness</em></strong>. Skewness is basically a measure of asymmetry, and the easiest way to explain it is by drawing some pictures. As <a class="reference internal" href="#fig-skew"><span class="std std-numref">Fig. 5.4</span></a> illustrates, if the data tend to have a lot of extreme small values (i.e., the lower tail is “longer” than the upper tail) and not so many extremely large values (left panel), then we say that the data are <em>negatively skewed</em>. On the other hand, if there are more extremely large values than extremely small ones (right panel) we say that the data are <em>positively skewed</em>. That’s the qualitative idea behind skewness. The actual formula for the skewness of a data set is as follows</p>
<div class="math notranslate nohighlight">
\[
\mbox{skewness}(X) = \frac{1}{N \hat{\sigma}^3} \sum_{i=1}^N (X_i - \bar{X})^3
\]</div>
<p>where <span class="math notranslate nohighlight">\(N\)</span> is the number of observations, <span class="math notranslate nohighlight">\(\bar{X}\)</span> is the sample mean, and <span class="math notranslate nohighlight">\(\hat{\sigma}\)</span> is the standard deviation (the “divide by <span class="math notranslate nohighlight">\(N-1\)</span>” version, that is). Luckily, <code class="docutils literal notranslate"><span class="pre">pandas</span></code>
already knows how to calculate skew:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">margins</span><span class="o">.</span><span class="n">skew</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">skipna</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.7804075289401982
</pre></div>
</div>
</div>
</div>
<p>Not surprisingly, it turns out that the AFL winning margins data is fairly skewed.</p>
<p>The final measure that is sometimes referred to, though very rarely in practice, is the <strong><em>kurtosis</em></strong> of a data set. Put simply, kurtosis is a measure of the “pointiness” of a data set, as illustrated in <a class="reference internal" href="#fig-kurtosis"><span class="std std-numref">Fig. 5.5</span></a>.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                                                              
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>                                                           
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>                                                         
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># load some data</span>
<span class="n">pathin</span> <span class="o">=</span> <span class="s1">&#39;/Users/ethan/Documents/GitHub/pythonbook/Data/&#39;</span>
<span class="n">file1</span> <span class="o">=</span> <span class="s1">&#39;kurtosisdata.csv&#39;</span>
<span class="n">file2</span> <span class="o">=</span> <span class="s1">&#39;kurtosisdata_ncurve.csv&#39;</span>

<span class="n">cd</span><span class="p">(</span><span class="n">pathin</span><span class="p">)</span>

<span class="n">df_kurtosis</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file1</span><span class="p">)</span>

<span class="c1"># define a normal distribution with a mean of 0 and a standard deviation of 1</span>
<span class="n">mu</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">mu</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">sigma</span><span class="p">,</span> <span class="n">mu</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="n">sigma</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>

<span class="n">platykurtic</span> <span class="o">=</span> <span class="n">df_kurtosis</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_kurtosis</span><span class="p">[</span><span class="s2">&quot;Kurtosis&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Platykurtic&quot;</span><span class="p">]</span>
<span class="n">mesokurtic</span> <span class="o">=</span> <span class="n">df_kurtosis</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_kurtosis</span><span class="p">[</span><span class="s2">&quot;Kurtosis&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Mesokurtic&quot;</span><span class="p">]</span>
<span class="n">leptokurtic</span> <span class="o">=</span> <span class="n">df_kurtosis</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_kurtosis</span><span class="p">[</span><span class="s2">&quot;Kurtosis&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Leptokurtic&quot;</span><span class="p">]</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">platykurtic</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Values&quot;</span><span class="p">,</span> <span class="n">binwidth</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">mesokurtic</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Values&quot;</span><span class="p">,</span> <span class="n">binwidth</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span>  <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">leptokurtic</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="s2">&quot;Values&quot;</span><span class="p">,</span> <span class="n">binwidth</span><span class="o">=</span><span class="mf">.5</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>



<span class="c1">#ax2 = ax.twinx()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">*</span><span class="mi">40000</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">*</span><span class="mi">40000</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">*</span><span class="mi">40000</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax3</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>


<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Platykurtic</span><span class="se">\n\&quot;</span><span class="s2">too flat</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Mesokurtic</span><span class="se">\n\&quot;</span><span class="s2">just right</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Leptokurtic</span><span class="se">\n\&quot;</span><span class="s2">too pointy</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ax</span> <span class="ow">in</span> <span class="n">axes</span><span class="p">:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">25000</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>



<span class="c1"># Again just ignore. This line is just here for the sake of figure captions and links.</span>
<span class="c1">#glue(&quot;kurtosis_fig&quot;, ax, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_104_1.png" src="_images/03.01-descriptives_104_1.png" />
</div>
</div>
<div class="figure align-default" id="fig-kurtosis" style="width: 600px">
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:title={&#39;center&#39;:&#39;Leptokurtic\n&quot;too pointy&quot;&#39;}, xlabel=&#39;Values&#39;, ylabel=&#39;Count&#39;&gt;
</pre></div>
</div>
</div>
<p class="caption"><span class="caption-number">Fig. 5.5 </span><span class="caption-text">An illustration of kurtosis. On the left, we have a “platykurtic” data set (kurtosis = -.95), meaning that the data set is “too flat”. In the middle we have a “mesokurtic” data set (kurtosis is almost exactly 0), which means that the pointiness of the data is just about right. Finally, on the right, we have a “leptokurtic” data set (kurtosis = 2.12) indicating that the data set is “too pointy”. Note that kurtosis is measured with respect to a normal curve (black line).</span><a class="headerlink" href="#fig-kurtosis" title="Permalink to this image">¶</a></p>
</div>
<p>By convention, we say that the “normal curve” (black lines) has zero kurtosis, so the pointiness of a data set is assessed relative to this curve. In this Figure, the data on the left are not pointy enough, so the kurtosis is negative and we call the data <em>platykurtic</em>. The data on the right are too pointy, so the kurtosis is positive and we say that the data is <em>leptokurtic</em>. But the data in the middle are just pointy enough, so we say that it is <em>mesokurtic</em> and has kurtosis zero. This is summarised in the table below:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>informal term</p></th>
<th class="text-align:left head"><p>technical name</p></th>
<th class="text-align:left head"><p>kurtosis value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>too flat</p></td>
<td class="text-align:left"><p>platykurtic</p></td>
<td class="text-align:left"><p>negative</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>just pointy enough</p></td>
<td class="text-align:left"><p>mesokurtic</p></td>
<td class="text-align:left"><p>zero</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>too pointy</p></td>
<td class="text-align:left"><p>leptokurtic</p></td>
<td class="text-align:left"><p>positive</p></td>
</tr>
</tbody>
</table>
<p>The equation for kurtosis is pretty similar in spirit to the formulas we’ve seen already for the variance and the skewness; except that where the variance involved squared deviations and the skewness involved cubed deviations, the kurtosis involves raising the deviations to the fourth power: <a class="footnote-reference brackets" href="#note-kurtosis" id="id17">13</a></p>
<div class="math notranslate nohighlight">
\[
\mbox{kurtosis}(X) = \frac{1}{N \hat\sigma^4} \sum_{i=1}^N \left( X_i - \bar{X} \right)^4  - 3
\]</div>
<p>I know, it’s not terribly interesting to me either. To make things worse, there are several different formulae for calculating kurtosis, so different statistics packages may give you different results, depending on which formula they use.  For instance, if we were to do this for the AFL margins, these three different methods give three different results:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pandas: &quot;</span><span class="p">,</span> <span class="n">margins</span><span class="o">.</span><span class="n">kurtosis</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fischer: &quot;</span><span class="p">,</span><span class="n">stats</span><span class="o">.</span><span class="n">kurtosis</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="n">fisher</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pearson: &quot;</span><span class="p">,</span><span class="n">stats</span><span class="o">.</span><span class="n">kurtosis</span><span class="p">(</span><span class="n">margins</span><span class="p">,</span> <span class="n">fisher</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pandas:  0.10109718805638757
Fischer:  0.06434955786516161
Pearson:  3.0643495578651616
</pre></div>
</div>
</div>
</div>
<p>Take your pick, I guess? <code class="docutils literal notranslate"><span class="pre">pandas</span></code> actually also calculates Fischer kurtosis, but <code class="docutils literal notranslate"><span class="pre">stats.kurtosis(margins,</span> <span class="pre">fisher=True)</span></code> adds a “bias correction” by default, while the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> version doesn’t. <code class="docutils literal notranslate"><span class="pre">stats.kurtosis(margins,</span> <span class="pre">fisher=True,</span> <span class="pre">bias=False)</span></code>will get you the same thing as the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> version. Ugh. If you want to assess the kurtosis of the data, you could probably do worse than just plotting the data and using your eyeballs.</p>
</div>
<div class="section" id="getting-an-overall-summary-of-a-variable">
<h2><span class="section-number">5.4. </span>Getting an overall summary of a variable<a class="headerlink" href="#getting-an-overall-summary-of-a-variable" title="Permalink to this headline">¶</a></h2>
<p>Up to this point in the chapter I’ve explained several different summary statistics that are commonly used when analysing data, along with specific functions that you can use in Python to calculate each one. However, it’s kind of annoying to have to separately calculate means, medians, standard deviations, skews etc. Wouldn’t it be nice if Python had some helpful functions that would do all these tedious calculations at once? Something that <em>describes</em> the data? Maybe something like <code class="docutils literal notranslate"><span class="pre">describe()</span></code>, perhaps? Why yes, yes it would. So much so that this very function exists, available as a method for <code class="docutils literal notranslate"><span class="pre">pandas</span></code> objects.</p>
<div class="section" id="describing-a-variable">
<h3><span class="section-number">5.4.1. </span>“Describing” a variable<a class="headerlink" href="#describing-a-variable" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">describe()</span></code> method is an easy thing to use, but a tricky thing to understand in full, since it’s a generic function. The basic idea behind the <code class="docutils literal notranslate"><span class="pre">describe()</span></code> method is that it prints out some useful information about whatever object (i.e., variable, as far as we’re concerned) you ask it to describe. As a consequence, the behaviour of the <code class="docutils literal notranslate"><span class="pre">describe()</span></code> function differs quite dramatically depending on the class of the object that you give it. Let’s start by giving it a <em>numeric</em> object:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">afl_margins</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>afl.margins</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>176.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>35.301136</td>
    </tr>
    <tr>
      <th>std</th>
      <td>26.073636</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>12.750000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>30.500000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>50.500000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>116.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>For numeric variables, we get a whole bunch of useful descriptive statistics. It gives us the minimum and maximum values (i.e., the range), the first and third quartiles (25th and 75th percentiles; i.e., the IQR), the mean and the median. In other words, it gives us a pretty good collection of descriptive statistics related to the central tendency and the spread of the data.</p>
<p>Okay, what about if we feed it a logical vector instead? Let’s say I want to know something about how many “blowouts” there were in the 2010 AFL season. I operationalise the concept of a blowout as a game in which the winning margin exceeds 50 points. Let’s create a logical variable <code class="docutils literal notranslate"><span class="pre">blowouts</span></code> in which the <span class="math notranslate nohighlight">\(i\)</span>-th element is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if that game was a blowout according to my definition:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;blowouts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;afl.margins&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">afl_margins</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>afl.margins</th>
      <th>blowouts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>56</td>
      <td>True</td>
    </tr>
    <tr>
      <th>1</th>
      <td>31</td>
      <td>False</td>
    </tr>
    <tr>
      <th>2</th>
      <td>56</td>
      <td>True</td>
    </tr>
    <tr>
      <th>3</th>
      <td>8</td>
      <td>False</td>
    </tr>
    <tr>
      <th>4</th>
      <td>32</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>So that’s what the <code class="docutils literal notranslate"><span class="pre">blowouts</span></code> variable looks like. Now let’s ask Python to <code class="docutils literal notranslate"><span class="pre">describe()</span></code> this data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">afl_margins</span><span class="p">[</span><span class="s1">&#39;blowouts&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count       176
unique        2
top       False
freq        132
Name: blowouts, dtype: object
</pre></div>
</div>
</div>
</div>
<p>In this context, <code class="docutils literal notranslate"><span class="pre">describe</span></code> gives us the total number of games (176), the number of categories for those games (2, either blowout or not a blowout), the most common category (False, that is, not a blowout), and a count for the more common category. A little cryptic, but not entirely unreasonable.</p>
</div>
<div class="section" id="describing-a-data-frame">
<h3><span class="section-number">5.4.2. </span>“Describing” a data frame<a class="headerlink" href="#describing-a-data-frame" title="Permalink to this headline">¶</a></h3>
<p>Okay what about data frames? When you <code class="docutils literal notranslate"><span class="pre">describe()</span></code> a dataframe, it produces a slightly condensed summary of each variable inside the data frame (as long as you specify that you want <code class="docutils literal notranslate"><span class="pre">'all'</span></code> the variables). To give you a sense of how this can be useful, let’s try this for a new data set, one that you’ve never seen before. The data is stored in the <code class="docutils literal notranslate"><span class="pre">clinical_trial_data.csv</span></code> file, and we’ll use it a lot in the chapter on <a class="reference internal" href="05.03-anova.html#anova"><span class="std std-ref">Comparing several means</span></a> (you can find a complete description of the data at the start of that chapter). Let’s load it, and see what we’ve got:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/ethanweed/pythonbook/main/Data/clinical_trial_data.csv&#39;</span>

<span class="n">df_clintrial</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="n">df_clintrial</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>drug</th>
      <th>therapy</th>
      <th>mood.gain</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>placebo</td>
      <td>no.therapy</td>
      <td>0.5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>placebo</td>
      <td>no.therapy</td>
      <td>0.3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>placebo</td>
      <td>no.therapy</td>
      <td>0.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>anxifree</td>
      <td>no.therapy</td>
      <td>0.6</td>
    </tr>
    <tr>
      <th>4</th>
      <td>anxifree</td>
      <td>no.therapy</td>
      <td>0.4</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Our dataframe <code class="docutils literal notranslate"><span class="pre">df_clintrial</span></code> contains three variables, <code class="docutils literal notranslate"><span class="pre">drug</span></code>, <code class="docutils literal notranslate"><span class="pre">therapy</span></code> and <code class="docutils literal notranslate"><span class="pre">mood.gain</span></code>. Presumably then, this data is from a clinical trial of some kind, in which people were administered different drugs; and the researchers looked to see what the drugs did to their mood. Let’s see if the <code class="docutils literal notranslate"><span class="pre">describe()</span></code> function sheds a little more light on this situation:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_clintrial</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>drug</th>
      <th>therapy</th>
      <th>mood.gain</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>18</td>
      <td>18</td>
      <td>18.000000</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>3</td>
      <td>2</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>top</th>
      <td>placebo</td>
      <td>no.therapy</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>6</td>
      <td>9</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.883333</td>
    </tr>
    <tr>
      <th>std</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.533854</td>
    </tr>
    <tr>
      <th>min</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.100000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.425000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.850000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.300000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.800000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we want to <code class="docutils literal notranslate"><span class="pre">describe</span></code> the entire dataframe, we need to add the argument  <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">=</span> <span class="pre">'all'</span></code>. This gives us information on all of the of columns, but this is still rather limited. I mean, I guess I learned something about this data, but if we want to really understand these data, we will have to use other tools to investigate them. That is what the rest of this book is about.</p>
</div>
</div>
<div class="section" id="standard-scores">
<span id="zcores"></span><h2><span class="section-number">5.5. </span>Standard scores<a class="headerlink" href="#standard-scores" title="Permalink to this headline">¶</a></h2>
<p>Suppose my friend is putting together a new questionnaire intended to measure “grumpiness”. The survey has 50 questions, which you can answer in a grumpy way or not. Across a big sample (hypothetically, let’s imagine a million people or so!) the data are fairly normally distributed, with the mean grumpiness score being 17 out of 50 questions answered in a grumpy way, and the standard deviation is 5. In contrast, when I take the questionnaire, I answer 35 out of 50 questions in a grumpy way. So, how grumpy am I? One way to think about would be to say that I have grumpiness of 35/50, so you might say that I’m 70% grumpy. But that’s a bit weird, when you think about it. If my friend had phrased her questions a bit differently, people might have answered them in a different way, so the overall distribution of answers could easily move up or down depending on the precise way in which the questions were asked. So, I’m only 70% grumpy <em>with respect to this set of survey questions</em>. Even if it’s a very good questionnaire, this isn’t very a informative statement.</p>
<p>A simpler way around this is to describe my grumpiness by comparing me to other people. Shockingly, out of my friend’s sample of 1,000,000 people, only 159 people were as grumpy as me (that’s not at all unrealistic, frankly), suggesting that I’m in the top 0.016% of people for grumpiness. This makes much more sense than trying to interpret the raw data. This idea – that we should describe my grumpiness in terms of the overall distribution of the grumpiness of humans – is the qualitative idea that standardisation attempts to get at. One way to do this is to do exactly what I just did, and describe everything in terms of percentiles. However, the problem with doing this is that “it’s lonely at the top”. Suppose that my friend had only collected a sample of 1000 people (still a pretty big sample for the purposes of testing a new questionnaire, I’d like to add), and this time gotten a mean of 16 out of 50 with a standard deviation of 5, let’s say. The problem is that almost certainly, not a single person in that sample would be as grumpy as me.</p>
<p>However, all is not lost. A different approach is to convert my grumpiness score into a <strong><em>standard score</em></strong>, also referred to as a <span class="math notranslate nohighlight">\(z\)</span>-score. The standard score is defined as the number of standard deviations above the mean that my grumpiness score lies. To phrase it in “pseudo-maths” the standard score is calculated like this:</p>
<div class="math notranslate nohighlight">
\[
\mbox{standard score} = \frac{\mbox{raw score} - \mbox{mean}}{\mbox{standard deviation}}
\]</div>
<p>In actual maths, the equation for the <span class="math notranslate nohighlight">\(z\)</span>-score is</p>
<div class="math notranslate nohighlight">
\[
z_i = \frac{X_i - \bar{X}}{\hat\sigma}
\]</div>
<p>So, going back to the grumpiness data, we can now transform Dan’s raw grumpiness into a standardised grumpiness score. I haven’t discussed how to compute <span class="math notranslate nohighlight">\(z\)</span>-scores, explicitly, but you can probably guess. For a dataset d, an easy way to find a z-score is to import <code class="docutils literal notranslate"><span class="pre">stats</span></code> from <code class="docutils literal notranslate"><span class="pre">scipy</span></code> and then do: <code class="docutils literal notranslate"><span class="pre">stats.zscore(d)</span></code>. If the mean is 17 and the standard deviation is 5 then my standardised grumpiness score would be</p>
<div class="math notranslate nohighlight">
\[
z = \frac{35 - 17}{5} = 3.6
\]</div>
<p>Technically, because I’m calculating means and standard deviations from a sample of data, but want to talk about my grumpiness relative to a population, what I’m actually doing is <em>estimating</em> a <span class="math notranslate nohighlight">\(z\)</span> score. However, since we haven’t talked about <a class="reference internal" href="04.03-estimation.html#estimation"><span class="std std-ref">estimation</span></a>  yet  I think it’s best to ignore this subtlety, especially as it makes very little difference to our calculations.</p>
<p>To interpret this value, recall the rough heuristic that I provided in the section on <a class="reference internal" href="#sd"><span class="std std-ref">standard deviation</span></a>, in which I noted that 99.7% of values are expected to lie within 3 standard deviations of the mean. So the fact that my grumpiness corresponds to a <span class="math notranslate nohighlight">\(z\)</span> score of 3.6 indicates that I’m very grumpy indeed.</p>
<p>In addition to allowing you to interpret a raw score in relation to a larger population (and thereby allowing you to make sense of variables that lie on arbitrary scales), standard scores serve a second useful function. Standard scores can be compared to one another in situations where the raw scores can’t. Suppose, for instance, my friend also had another questionnaire that measured extraversion using a 24 items questionnaire. The overall mean for this measure turns out to be 13 with standard deviation 4, and I scored a 2. As you can imagine, it doesn’t make a lot of sense to try to compare my raw score of 2 on the extraversion questionnaire to my raw score of 35 on the grumpiness questionnaire. The raw scores for the two variables are “about” fundamentally different things, so this would be like comparing apples to oranges.</p>
<p>What about the standard scores? Well, this is a little different. If we calculate the standard scores, we get <span class="math notranslate nohighlight">\(z = (35-17)/5 = 3.6\)</span> for grumpiness and <span class="math notranslate nohighlight">\(z = (2-13)/4 = -2.75\)</span> for extraversion. These two numbers <em>can</em> be compared to each other. <a class="footnote-reference brackets" href="#note11" id="id18">14</a>  I’m much less extraverted than most people (<span class="math notranslate nohighlight">\(z = -2.75\)</span>) and much grumpier than most people (<span class="math notranslate nohighlight">\(z = 3.6\)</span>): but the extent of my unusualness is much more extreme for grumpiness (since 3.6 is a bigger number than 2.75).  Because each standardised score is a statement about where an observation falls <em>relative to its own population</em>, it <em>is</em> possible to compare standardised scores across completely different variables.</p>
</div>
<div class="section" id="correlations">
<span id="id19"></span><h2><span class="section-number">5.6. </span>Correlations<a class="headerlink" href="#correlations" title="Permalink to this headline">¶</a></h2>
<p>Up to this point we have focused entirely on how to construct descriptive statistics for a single variable. What we haven’t done is talked about how to describe the relationships <em>between</em> variables in the data. To do that, we want to talk mostly about the <strong><em>correlation</em></strong> between variables. But first, we need some data.</p>
<div class="section" id="the-data">
<h3><span class="section-number">5.6.1. </span>The data<a class="headerlink" href="#the-data" title="Permalink to this headline">¶</a></h3>
<p>After spending so much time looking at the AFL data, I’m starting to get bored with sports. Instead, let’s turn to a topic close to every parent’s heart: sleep. The following data set is fictitious, but based on real events. Suppose I’m curious to find out how much my infant son’s sleeping habits affect my mood. Let’s say that I can rate my grumpiness very precisely, on a scale from 0 (not at all grumpy) to 100 (grumpy as a very, very grumpy old man). And, lets also assume that I’ve been measuring my grumpiness, my sleeping patterns and my son’s sleeping patterns for quite some time now. Let’s say, for 100 days. And, being a nerd, I’ve saved the data as a file called <code class="docutils literal notranslate"><span class="pre">parenthood.csv</span></code>. If we load the data…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/ethanweed/pythonbook/main/Data/parenthood.csv&#39;</span>
<span class="n">parenthood</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="n">parenthood</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan_sleep</th>
      <th>baby_sleep</th>
      <th>dan_grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.59</td>
      <td>10.18</td>
      <td>56</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7.91</td>
      <td>11.66</td>
      <td>60</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5.14</td>
      <td>7.92</td>
      <td>82</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.71</td>
      <td>9.61</td>
      <td>55</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6.68</td>
      <td>9.75</td>
      <td>67</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>… we see that the file contains a single data frame called <code class="docutils literal notranslate"><span class="pre">parenthood</span></code>, which contains four variables <code class="docutils literal notranslate"><span class="pre">dan_sleep</span></code>, <code class="docutils literal notranslate"><span class="pre">baby_sleep</span></code>, <code class="docutils literal notranslate"><span class="pre">dan_grump</span></code> and <code class="docutils literal notranslate"><span class="pre">day</span></code>. Next, I’ll calculate some basic descriptive statistics:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parenthood</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan_sleep</th>
      <th>baby_sleep</th>
      <th>dan_grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.00000</td>
      <td>100.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>6.965200</td>
      <td>8.049200</td>
      <td>63.71000</td>
      <td>50.500000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.015884</td>
      <td>2.074232</td>
      <td>10.04967</td>
      <td>29.011492</td>
    </tr>
    <tr>
      <th>min</th>
      <td>4.840000</td>
      <td>3.250000</td>
      <td>41.00000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>6.292500</td>
      <td>6.425000</td>
      <td>57.00000</td>
      <td>25.750000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>7.030000</td>
      <td>7.950000</td>
      <td>62.00000</td>
      <td>50.500000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>7.740000</td>
      <td>9.635000</td>
      <td>71.00000</td>
      <td>75.250000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>9.000000</td>
      <td>12.070000</td>
      <td>91.00000</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Finally, to give a graphical depiction of what each of the three interesting variables looks like, <a class="reference internal" href="#fig-grump"><span class="std std-numref">Fig. 5.6</span></a> plots histograms.</p>
<div class="cell tag_hide-outuput tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">dan_grump</span> <span class="o">=</span> <span class="n">parenthood</span><span class="p">[</span><span class="s1">&#39;dan_grump&#39;</span><span class="p">]</span>
<span class="n">dan_sleep</span> <span class="o">=</span> <span class="n">parenthood</span><span class="p">[</span><span class="s1">&#39;dan_sleep&#39;</span><span class="p">]</span>
<span class="n">baby_sleep</span> <span class="o">=</span> <span class="n">parenthood</span><span class="p">[</span><span class="s1">&#39;baby_sleep&#39;</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Sleep Data&#39;</span><span class="p">)</span>

<span class="c1"># My grumpiness</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">dan_grump</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">dan_grump</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># My sleep</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">dan_sleep</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">dan_sleep</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="c1"># Baby&#39;s sleep</span>
<span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">baby_sleep</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">baby_sleep</span><span class="o">.</span><span class="n">name</span><span class="p">);</span>

<span class="c1"># You know the drill by now: this is just for the purpose of linking to the figure in the book</span>
<span class="c1">#glue(&quot;grump_fig&quot;, fig, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_127_0.png" src="_images/03.01-descriptives_127_0.png" />
</div>
</div>
<div class="figure align-default" id="fig-grump" style="width: 650px">
<p class="caption"><span class="caption-number">Fig. 5.6 </span><span class="caption-text">Histograms for the three interesting variables in the parenthood data set.</span><a class="headerlink" href="#fig-grump" title="Permalink to this image">¶</a></p>
</div>
<p>One thing to note: just because Python can calculate dozens of different statistics doesn’t mean you should report all of them. If I were writing this up for a report, I’d probably pick out those statistics that are of most interest to me (and to my readership), and then put them into a nice, simple table like the one in the table below. <a class="footnote-reference brackets" href="#note12" id="id20">15</a> Notice that when I put it into a table, I gave everything “human readable” names. This is always good practice. Notice also that I’m not getting enough sleep. This isn’t good practice, but other parents tell me that it’s standard practice.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:left head"><p>variable</p></th>
<th class="text-align:left head"><p>min</p></th>
<th class="text-align:left head"><p>max</p></th>
<th class="text-align:left head"><p>mean</p></th>
<th class="text-align:left head"><p>median</p></th>
<th class="text-align:left head"><p>std. dev</p></th>
<th class="text-align:left head"><p>IQR</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:left"><p>Dan’s grumpiness</p></td>
<td class="text-align:left"><p>41</p></td>
<td class="text-align:left"><p>91</p></td>
<td class="text-align:left"><p>63.71</p></td>
<td class="text-align:left"><p>62</p></td>
<td class="text-align:left"><p>10.05</p></td>
<td class="text-align:left"><p>14</p></td>
</tr>
<tr class="row-odd"><td class="text-align:left"><p>Dan’s hours slept</p></td>
<td class="text-align:left"><p>4.84</p></td>
<td class="text-align:left"><p>9</p></td>
<td class="text-align:left"><p>6.97</p></td>
<td class="text-align:left"><p>7.03</p></td>
<td class="text-align:left"><p>1.02</p></td>
<td class="text-align:left"><p>1.45</p></td>
</tr>
<tr class="row-even"><td class="text-align:left"><p>Dan’s son’s hours slept</p></td>
<td class="text-align:left"><p>3.25</p></td>
<td class="text-align:left"><p>12.07</p></td>
<td class="text-align:left"><p>8.05</p></td>
<td class="text-align:left"><p>7.95</p></td>
<td class="text-align:left"><p>2.07</p></td>
<td class="text-align:left"><p>3.21</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="the-strength-and-direction-of-a-relationship">
<span id="correlation"></span><h3><span class="section-number">5.6.2. </span>The strength and direction of a relationship<a class="headerlink" href="#the-strength-and-direction-of-a-relationship" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Sleepy, grumpy scatterplots&#39;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dan_sleep</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dan_grump</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Dan&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Sleep&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;My grumpiness&quot;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">baby_sleep</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dan_grump</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Baby&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Sleep&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;My grumpiness&quot;</span><span class="p">)</span>

<span class="c1">#glue(&quot;sleep_scatter-fig1&quot;, fig, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_131_1.png" src="_images/03.01-descriptives_131_1.png" />
</div>
</div>
<div class="figure align-default" id="fig-sleep-scatter1" style="width: 600px">
<p class="caption"><span class="caption-number">Fig. 5.7 </span><span class="caption-text">Scatterplots showing the relationship between dan.sleep and dan.grump (left) and the rela-
tionship between baby.sleep and dan.grump (right).</span><a class="headerlink" href="#fig-sleep-scatter1" title="Permalink to this image">¶</a></p>
</div>
<p>We can draw scatterplots to give us a general sense of how closely related two variables are. Ideally though, we might want to say a bit more about it than that. For instance, let’s compare the relationship between <code class="docutils literal notranslate"><span class="pre">dan.sleep</span></code> and <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code> with that between <code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code> and <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code> <a class="reference internal" href="#fig-sleep-scatter1"><span class="std std-numref">Fig. 5.7</span></a>. When looking at these two plots side by side, it’s clear that the relationship is <em>qualitatively</em> the same in both cases: more sleep equals less grump! However, it’s also pretty obvious that the relationship between <code class="docutils literal notranslate"><span class="pre">dan.sleep</span></code> and <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code> is <em>stronger</em> than the relationship between <code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code> and <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code>. The plot on the left is “neater” than the one on the right. What it feels like is that if you want to predict what my mood is, it’d help you a little bit to know how many hours my son slept, but it’d be <em>more</em> helpful to know how many hours I slept.</p>
<p>In contrast, let’s consider <a class="reference internal" href="#fig-sleep-scatter2"><span class="std std-numref">Fig. 5.8</span></a>. If we compare the scatterplot of “<code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code> v <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code>” to the scatterplot of <code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code> v <code class="docutils literal notranslate"><span class="pre">dan.sleep</span></code>, the overall strength of the relationship is the same, but the direction is different. That is, if my son sleeps more, I get <em>more</em> sleep (positive relationship, but if he sleeps more then I get <em>less</em> grumpy (negative relationship).</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># y axes are now on different scales, so sharey=False</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Sleepier, grumpier scatterplots&#39;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dan_sleep</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dan_grump</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Baby&#39;s sleep&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;My grumpiness&quot;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">baby_sleep</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dan_sleep</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Baby&#39;s sleep&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;My sleep&quot;</span><span class="p">)</span>

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;sleep_scatter-fig2&quot;</span><span class="p">,</span> <span class="n">fig</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_134_1.png" src="_images/03.01-descriptives_134_1.png" />
</div>
</div>
<div class="figure align-default" id="fig-sleep-scatter2" style="width: 600px">
<p class="caption"><span class="caption-number">Fig. 5.8 </span><span class="caption-text">Scatterplots showing the relationship between baby_sleep and dan_grump (left), as compared
to the relationship between baby.sleep and dan.sleep (right).</span><a class="headerlink" href="#fig-sleep-scatter2" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="the-correlation-coefficient">
<h3><span class="section-number">5.6.3. </span>The correlation coefficient<a class="headerlink" href="#the-correlation-coefficient" title="Permalink to this headline">¶</a></h3>
<p>We can make these ideas a bit more explicit by introducing the idea of a <strong><em>correlation coefficient</em></strong> (or, more specifically, Pearson’s correlation coefficient), which is traditionally denoted by <span class="math notranslate nohighlight">\(r\)</span>. The correlation coefficient between two variables <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> (sometimes denoted <span class="math notranslate nohighlight">\(r_{XY}\)</span>), which we’ll define more precisely in the next section, is a measure that varies from <span class="math notranslate nohighlight">\(-1\)</span> to <span class="math notranslate nohighlight">\(1\)</span>. When <span class="math notranslate nohighlight">\(r = -1\)</span> it means that we have a perfect negative relationship, and when <span class="math notranslate nohighlight">\(r = 1\)</span> it means we have a perfect positive relationship. When <span class="math notranslate nohighlight">\(r = 0\)</span>, there’s no relationship at all. If you look at <a class="reference internal" href="#fig-corrs"><span class="std std-numref">Fig. 5.9</span></a>, you can see several plots showing what different correlations look like.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">mean</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">cov</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="n">r</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">.33</span><span class="p">,</span> <span class="mf">.66</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">rneg</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">.33</span><span class="p">,</span> <span class="o">-</span><span class="mf">.66</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
    <span class="n">cov</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">],</span> <span class="p">[</span><span class="n">val</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">multivariate_normal</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">cov</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">s</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">s</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;r = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>

<span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rneg</span><span class="p">):</span>
    <span class="n">cov</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="n">val</span><span class="p">],</span> <span class="p">[</span><span class="n">val</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">multivariate_normal</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">cov</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">s</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">s</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;r = &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>

<span class="c1">#glue(&quot;corrs-fig&quot;, fig, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_137_0.png" src="_images/03.01-descriptives_137_0.png" />
</div>
</div>
<div class="figure align-default" id="fig-corrs" style="width: 600px">
<p class="caption"><span class="caption-number">Fig. 5.9 </span><span class="caption-text">Illustration of the effect of varying the strength and direction of a correlation. In the left hand column, the correlations are 0, .33, .66 and 1. In the right hand column, the correlations are 0, -.33, -.66 and -1.</span><a class="headerlink" href="#fig-corrs" title="Permalink to this image">¶</a></p>
</div>
<p>The formula for the Pearson’s correlation coefficient can be written in several different ways. I think the simplest way to write down the formula is to break it into two steps. Firstly, let’s introduce the idea of a <strong><em>covariance</em></strong>. The covariance between two variables <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> is a generalisation of the notion of the variance; it’s a mathematically simple way of describing the relationship between two variables that isn’t terribly informative to humans:</p>
<div class="math notranslate nohighlight">
\[
\mbox{Cov}(X,Y) = \frac{1}{N-1} \sum_{i=1}^N \left( X_i - \bar{X} \right) \left( Y_i - \bar{Y} \right)
\]</div>
<p>Because we’re multiplying (i.e., taking the “product” of) a quantity that depends on <span class="math notranslate nohighlight">\(X\)</span> by a quantity that depends on <span class="math notranslate nohighlight">\(Y\)</span> and then averaging <a class="footnote-reference brackets" href="#note-covariance" id="id21">16</a>, you can think of the formula for the covariance as an “average cross product” between <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span>. The covariance has the nice property that, if <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> are entirely unrelated, then the covariance is exactly zero. If the relationship between them is positive (in the sense shown in <a class="reference internal" href="#fig-corrs"><span class="std std-numref">Fig. 5.9</span></a> then the covariance is also positive; and if the relationship is negative then the covariance is also negative. In other words, the covariance captures the basic qualitative idea of correlation. Unfortunately, the raw magnitude of the covariance isn’t easy to interpret: it depends on the units in which <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> are expressed, and worse yet, the actual units that the covariance itself is expressed in are really weird. For instance, if <span class="math notranslate nohighlight">\(X\)</span> refers to the <code class="docutils literal notranslate"><span class="pre">dan.sleep</span></code> variable (units: hours) and <span class="math notranslate nohighlight">\(Y\)</span> refers to the <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code> variable (units: grumps), then the units for their covariance are “hours <span class="math notranslate nohighlight">\(\times\)</span> grumps”. And I have no freaking idea what that would even mean.</p>
<p>The Pearson correlation coefficient <span class="math notranslate nohighlight">\(r\)</span> fixes this interpretation problem by standardising the covariance, in pretty much the exact same way that the <span class="math notranslate nohighlight">\(z\)</span>-score standardises a raw score: by dividing by the standard deviation. However, because we have two variables that contribute to the covariance, the standardisation only works if we divide by both standard deviations (this is an oversimplification, but it’ll do for our purposes)  In other words, the correlation between <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> can be written as follows:</p>
<div class="math notranslate nohighlight">
\[
r_{XY}  = \frac{\mbox{Cov}(X,Y)}{ \hat{\sigma}_X \ \hat{\sigma}_Y}
\]</div>
<p>By doing this standardisation, not only do we keep all of the nice properties of the covariance discussed earlier, but the actual values of <span class="math notranslate nohighlight">\(r\)</span> are on a meaningful scale: <span class="math notranslate nohighlight">\(r= 1\)</span> implies a perfect positive relationship, and <span class="math notranslate nohighlight">\(r = -1\)</span> implies a perfect negative relationship. I’ll expand a little more on this point later, in section on <a class="reference internal" href="#interpreting-correlations"><span class="std std-ref">interpreting correlations</span></a>. But before I do, let’s look at how to calculate correlations in Python.</p>
</div>
<div class="section" id="calculating-correlations-in-python">
<h3><span class="section-number">5.6.4. </span>Calculating correlations in Python<a class="headerlink" href="#calculating-correlations-in-python" title="Permalink to this headline">¶</a></h3>
<p>Calculating correlations in Python can be done using the <code class="docutils literal notranslate"><span class="pre">corr()</span></code> method. The simplest way to use the command is to specify two input arguments <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>, each one corresponding to one of the variables. The following extract illustrates the basic usage of the function: <a class="footnote-reference brackets" href="#note13" id="id22">17</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">parenthood</span><span class="p">[</span><span class="s1">&#39;dan.sleep&#39;</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">parenthood</span><span class="p">[</span><span class="s1">&#39;dan.grump&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>-0.9033840374657273
</pre></div>
</div>
</div>
</div>
<p>However, the <code class="docutils literal notranslate"><span class="pre">cor()</span></code> function is a bit more powerful than this simple example suggests. For example, you can also calculate a complete “correlation matrix”, between all pairs of variables in the data frame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parenthood</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan.sleep</th>
      <th>baby.sleep</th>
      <th>dan.grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>dan.sleep</th>
      <td>1.000000</td>
      <td>0.627949</td>
      <td>-0.903384</td>
      <td>-0.098408</td>
    </tr>
    <tr>
      <th>baby.sleep</th>
      <td>0.627949</td>
      <td>1.000000</td>
      <td>-0.565964</td>
      <td>-0.010434</td>
    </tr>
    <tr>
      <th>dan.grump</th>
      <td>-0.903384</td>
      <td>-0.565964</td>
      <td>1.000000</td>
      <td>0.076479</td>
    </tr>
    <tr>
      <th>day</th>
      <td>-0.098408</td>
      <td>-0.010434</td>
      <td>0.076479</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="interpreting-a-correlation">
<span id="interpreting-correlations"></span><h3><span class="section-number">5.6.5. </span>Interpreting a correlation<a class="headerlink" href="#interpreting-a-correlation" title="Permalink to this headline">¶</a></h3>
<p>Naturally, in real life you don’t see many correlations of 1. So how should you interpret a correlation of, say <span class="math notranslate nohighlight">\(r= .4\)</span>? The honest answer is that it really depends on what you want to use the data for, and on how strong the correlations in your field tend to be. A  friend of mine in engineering once argued that any correlation less than <span class="math notranslate nohighlight">\(.95\)</span> is completely useless (I think he was exaggerating, even for engineering). On the other hand there are real cases – even in psychology – where you should really expect correlations that strong. For instance, one of the benchmark data sets used to test theories of how people judge similarities is so clean that any theory that can’t achieve a correlation of at least <span class="math notranslate nohighlight">\(.9\)</span> really isn’t deemed to be successful. However, when looking for (say) elementary correlates of intelligence (e.g., inspection time, response time), if you get a correlation above <span class="math notranslate nohighlight">\(.3\)</span> you’re doing very very well. In short, the interpretation of a correlation depends a lot on the context. That said, the rough guide in <a class="reference internal" href="#table-corr-interpretation"><span class="std std-numref">Fig. 5.10</span></a> is pretty typical.</p>
<div class="cell tag_hide-input tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">correlation</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;-1.0 to -0.9&quot;</span><span class="p">,</span> <span class="s2">&quot;-0.9 to -0.7&quot;</span><span class="p">,</span> <span class="s2">&quot;-0.7 to -0.4&quot;</span><span class="p">,</span> 
                    <span class="s2">&quot;-0.4 to -0.2&quot;</span><span class="p">,</span> <span class="s2">&quot;-0.2 to 0&quot;</span><span class="p">,</span> <span class="s2">&quot;0 to 0.2 &quot;</span><span class="p">,</span> <span class="s2">&quot;0.2 to 0.4&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;.4 to 0.7&quot;</span><span class="p">,</span> <span class="s2">&quot;0.7 to 0.9&quot;</span><span class="p">,</span> <span class="s2">&quot;0.9 to 1.0&quot;</span><span class="p">]</span>
<span class="n">strength</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Very strong&quot;</span><span class="p">,</span> <span class="s2">&quot;Strong&quot;</span><span class="p">,</span> <span class="s2">&quot;Moderate&quot;</span><span class="p">,</span> <span class="s2">&quot;Weak&quot;</span><span class="p">,</span> <span class="s2">&quot;Negligible&quot;</span><span class="p">,</span> <span class="s2">&quot;Negligible&quot;</span><span class="p">,</span> <span class="s2">&quot;Weak&quot;</span><span class="p">,</span>
           <span class="s2">&quot;Moderate&quot;</span><span class="p">,</span> <span class="s2">&quot;Strong&quot;</span><span class="p">,</span> <span class="s2">&quot;Very strong&quot;</span><span class="p">]</span>
<span class="n">direction</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Negative&quot;</span><span class="p">]</span><span class="o">*</span><span class="mi">5</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;Positive&quot;</span><span class="p">]</span><span class="o">*</span><span class="mi">5</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;Correlation&#39;</span><span class="p">:</span> <span class="n">correlation</span><span class="p">,</span>
     <span class="s1">&#39;Strength&#39;</span><span class="p">:</span> <span class="n">strength</span><span class="p">,</span>
     <span class="s1">&#39;Direction&#39;</span><span class="p">:</span> <span class="n">direction</span>
    <span class="p">})</span> 

<span class="n">glue</span><span class="p">(</span><span class="s2">&quot;corr-interpretation-table&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="figure align-default" id="table-corr-interpretation" style="width: 600px">
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Correlation</th>
      <th>Strength</th>
      <th>Direction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-1.0 to -0.9</td>
      <td>Very strong</td>
      <td>Negative</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-0.9 to -0.7</td>
      <td>Strong</td>
      <td>Negative</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-0.7 to -0.4</td>
      <td>Moderate</td>
      <td>Negative</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-0.4 to -0.2</td>
      <td>Weak</td>
      <td>Negative</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-0.2 to 0</td>
      <td>Negligible</td>
      <td>Negative</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0 to 0.2</td>
      <td>Negligible</td>
      <td>Positive</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.2 to 0.4</td>
      <td>Weak</td>
      <td>Positive</td>
    </tr>
    <tr>
      <th>7</th>
      <td>.4 to 0.7</td>
      <td>Moderate</td>
      <td>Positive</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.7 to 0.9</td>
      <td>Strong</td>
      <td>Positive</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.9 to 1.0</td>
      <td>Very strong</td>
      <td>Positive</td>
    </tr>
  </tbody>
</table>
</div></div></div>
<p class="caption"><span class="caption-number">Fig. 5.10 </span><span class="caption-text">A rough guide to interpreting correlations. Note that I say a rough guide. There aren’t hard and fast rules for what counts as strong or weak relationships. It depends on the context.</span><a class="headerlink" href="#table-corr-interpretation" title="Permalink to this image">¶</a></p>
</div>
<p>However, something that can never be stressed enough is that you should <em>always</em> look at the scatterplot before attaching any interpretation to the data. A correlation might not mean what you think it means. The classic illustration of this is “Anscombe’s Quartet”  <span id="id23">[<a class="reference internal" href="bibliography.html#id40" title="F. J. Anscombe. Graphs in statistical analysis. American Statistician, 27:17–21, 1973.">Anscombe, 1973</a>]</span>, which is a collection of four data sets. Each data set has two variables, an <span class="math notranslate nohighlight">\(X\)</span> and a <span class="math notranslate nohighlight">\(Y\)</span>. For all four data sets the mean value for <span class="math notranslate nohighlight">\(X\)</span> is 9 and the mean for <span class="math notranslate nohighlight">\(Y\)</span> is 7.5. The, standard deviations for all <span class="math notranslate nohighlight">\(X\)</span> variables are almost identical, as are those for the the <span class="math notranslate nohighlight">\(Y\)</span> variables. And in each case the correlation between <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span> is <span class="math notranslate nohighlight">\(r = 0.816\)</span>. You can verify this yourself, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="mf">8.04</span><span class="p">,</span> <span class="mf">6.95</span><span class="p">,</span> <span class="mf">7.58</span><span class="p">,</span> <span class="mf">8.81</span><span class="p">,</span> <span class="mf">8.33</span><span class="p">,</span> <span class="mf">9.96</span><span class="p">,</span> <span class="mf">7.24</span><span class="p">,</span> <span class="mf">4.26</span><span class="p">,</span> <span class="mf">10.84</span><span class="p">,</span> <span class="mf">4.82</span><span class="p">,</span> <span class="mf">5.68</span><span class="p">]</span>
<span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="mf">9.14</span><span class="p">,</span> <span class="mf">8.14</span><span class="p">,</span> <span class="mf">8.74</span><span class="p">,</span> <span class="mf">8.77</span><span class="p">,</span> <span class="mf">9.26</span><span class="p">,</span> <span class="mf">8.10</span><span class="p">,</span> <span class="mf">6.13</span><span class="p">,</span> <span class="mf">3.10</span><span class="p">,</span> <span class="mf">9.13</span><span class="p">,</span> <span class="mf">7.26</span><span class="p">,</span> <span class="mf">4.74</span><span class="p">]</span>
<span class="n">y3</span> <span class="o">=</span> <span class="p">[</span><span class="mf">7.46</span><span class="p">,</span> <span class="mf">6.77</span><span class="p">,</span> <span class="mf">12.74</span><span class="p">,</span> <span class="mf">7.11</span><span class="p">,</span> <span class="mf">7.81</span><span class="p">,</span> <span class="mf">8.84</span><span class="p">,</span> <span class="mf">6.08</span><span class="p">,</span> <span class="mf">5.39</span><span class="p">,</span> <span class="mf">8.15</span><span class="p">,</span> <span class="mf">6.42</span><span class="p">,</span> <span class="mf">5.73</span><span class="p">]</span>
<span class="n">x4</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="n">y4</span> <span class="o">=</span> <span class="p">[</span><span class="mf">6.58</span><span class="p">,</span> <span class="mf">5.76</span><span class="p">,</span> <span class="mf">7.71</span><span class="p">,</span> <span class="mf">8.84</span><span class="p">,</span> <span class="mf">8.47</span><span class="p">,</span> <span class="mf">7.04</span><span class="p">,</span> <span class="mf">5.25</span><span class="p">,</span> <span class="mf">12.50</span><span class="p">,</span> <span class="mf">5.56</span><span class="p">,</span> <span class="mf">7.91</span><span class="p">,</span> <span class="mf">6.89</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span>
     <span class="s1">&#39;y1&#39;</span><span class="p">:</span> <span class="n">y1</span><span class="p">,</span>
     <span class="s1">&#39;y2&#39;</span><span class="p">:</span> <span class="n">y2</span><span class="p">,</span>
     <span class="s1">&#39;y3&#39;</span><span class="p">:</span> <span class="n">y3</span><span class="p">,</span>
     <span class="s1">&#39;x4&#39;</span><span class="p">:</span> <span class="n">x4</span><span class="p">,</span>
     <span class="s1">&#39;y4&#39;</span><span class="p">:</span> <span class="n">y4</span>
    <span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y1&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y2&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y3&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;x4&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;y4&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.81642051634484
0.8162365060002428
0.8162867394895984
0.8165214368885028
</pre></div>
</div>
</div>
</div>
<p>and so on.</p>
<p>You’d think that these four data sets would look pretty similar to one another. They do not. If we draw scatterplots of <span class="math notranslate nohighlight">\(X\)</span> against <span class="math notranslate nohighlight">\(Y\)</span> for all four variables, as shown in <a class="reference internal" href="#fig-anscombe"><span class="std std-numref">Fig. 5.11</span></a> we see that all four of these are <em>spectacularly</em> different to each other.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Anscombe</span><span class="se">\&#39;</span><span class="s1">s quartet&#39;</span><span class="p">)</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;y1&#39;</span><span class="p">],</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;y2&#39;</span><span class="p">],</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;y3&#39;</span><span class="p">],</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;x4&#39;</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;y4&#39;</span><span class="p">],</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="c1">#glue(&quot;anscombe-fig&quot;, fig, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;x4&#39;, ylabel=&#39;y4&#39;&gt;
</pre></div>
</div>
<img alt="_images/03.01-descriptives_151_1.png" src="_images/03.01-descriptives_151_1.png" />
</div>
</div>
<div class="figure align-default" id="fig-anscombe" style="width: 600px">
<p class="caption"><span class="caption-number">Fig. 5.11 </span><span class="caption-text">Anscombe’s quartet. All four of these data sets have a Pearson correlation of r “ .816, but they are qualitatively different from one another.</span><a class="headerlink" href="#fig-anscombe" title="Permalink to this image">¶</a></p>
</div>
<p>The lesson here, which so very many people seem to forget in real life is “<em>always graph your raw data</em>”. This will be the focus of the chapter on <a class="reference internal" href="03.02-drawing_graphs.html#drawinggraphs"><span class="std std-ref">Drawing Graphs</span></a>.</p>
<p>The Pearson correlation coefficient is useful for a lot of things, but it does have shortcomings. One issue in particular stands out: what it actually measures is the strength of the <em>linear</em> relationship between two variables. In other words, what it gives you is a measure of the extent to which the data all tend to fall on a single, perfectly straight line. Often, this is a pretty good approximation to what we mean when we say “relationship”, and so the Pearson correlation is a good thing to calculation. Sometimes, it isn’t.</p>
<p>One very common situation where the Pearson correlation isn’t quite the right thing to use arises when an increase in one variable <span class="math notranslate nohighlight">\(X\)</span> really is reflected in an increase in another variable <span class="math notranslate nohighlight">\(Y\)</span>, but the nature of the relationship isn’t necessarily linear. An example of this might be the relationship between effort and reward when studying for an exam. If you put in zero effort (<span class="math notranslate nohighlight">\(X\)</span>) into learning a subject, then you should expect a grade of 0% (<span class="math notranslate nohighlight">\(Y\)</span>). However, a little bit of effort will cause a <em>massive</em> improvement: just turning up to lectures means that you learn a fair bit, and if you just turn up to classes, and scribble a few things down so your grade might rise to 35%, all without a lot of effort. However, you just don’t get the same effect at the other end of the scale. As everyone knows, it takes <em>a lot</em> more effort to get a grade of 90% than it takes to get a grade of 55%. What this means is that, if I’ve got data looking at study effort and grades, there’s a pretty good chance that Pearson correlations will be misleading.</p>
<p>To illustrate, consider the data plotted in <a class="reference internal" href="#fig-rankcorr"><span class="std std-numref">Fig. 5.12</span></a>, showing the relationship between hours worked and grade received for 10 students taking some class. The curious thing about this – highly fictitious – data set is that increasing your effort <em>always</em> increases your grade. It might be by a lot or it might be by a little, but increasing effort will never decrease your grade. The data are stored in <code class="docutils literal notranslate"><span class="pre">effort.csv</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/ethanweed/pythonbook/main/Data/effort.csv&#39;</span>

<span class="n">effort</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="n">effort</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>hours</th>
      <th>grade</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>13</td>
    </tr>
    <tr>
      <th>1</th>
      <td>76</td>
      <td>91</td>
    </tr>
    <tr>
      <th>2</th>
      <td>40</td>
      <td>79</td>
    </tr>
    <tr>
      <th>3</th>
      <td>6</td>
      <td>14</td>
    </tr>
    <tr>
      <th>4</th>
      <td>16</td>
      <td>21</td>
    </tr>
    <tr>
      <th>5</th>
      <td>28</td>
      <td>74</td>
    </tr>
    <tr>
      <th>6</th>
      <td>27</td>
      <td>47</td>
    </tr>
    <tr>
      <th>7</th>
      <td>59</td>
      <td>85</td>
    </tr>
    <tr>
      <th>8</th>
      <td>46</td>
      <td>84</td>
    </tr>
    <tr>
      <th>9</th>
      <td>68</td>
      <td>88</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we run a standard Pearson correlation, it shows a strong relationship between hours worked and grade received,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">effort</span><span class="p">[</span><span class="s1">&#39;hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">effort</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.9094019658612525
</pre></div>
</div>
</div>
</div>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">sns</span><span class="o">.</span><span class="n">regplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;hours&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">effort</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;hours&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;grade&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">effort</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_linestyle</span><span class="p">(</span><span class="s2">&quot;--&quot;</span><span class="p">)</span>


<span class="c1">#glue(&quot;rankcorr-fig&quot;, fig, display=False)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03.01-descriptives_158_0.png" src="_images/03.01-descriptives_158_0.png" />
</div>
</div>
<div class="figure align-default" id="fig-rankcorr" style="width: 600px">
<p class="caption"><span class="caption-number">Fig. 5.12 </span><span class="caption-text">The relationship between hours worked and grade received, for a toy data set consisting of only 10 students (each dot corresponds to one student). The dashed line through the middle shows the linear relationship between the two variables. This produces a strong Pearson correlation of <span class="math notranslate nohighlight">\(r = .91\)</span>. However, the interesting thing to note here is that there’s actually a perfect monotonic relationship between the two variables: in this toy example at least, increasing the hours worked always increases the grade received, as illustrated by the solid line. This is reflected in a Spearman correlation of <span class="math notranslate nohighlight">\(rho = 1\)</span>. With such a small data set, however, it’s an open question as to which version better describes the actual relationship involved.</span><a class="headerlink" href="#fig-rankcorr" title="Permalink to this image">¶</a></p>
</div>
<p>but this doesn’t actually capture the observation that increasing hours worked <em>always</em> increases the grade. There’s a sense here in which we want to be able to say that the correlation is <em>perfect</em> but for a somewhat different notion of what a “relationship” is. What we’re looking for is something that captures the fact that there is a perfect <strong><em>ordinal relationship</em></strong> here. That is, if student 1 works more hours than student 2, then we can guarantee that student 1 will get the better grade. That’s not what a correlation of <span class="math notranslate nohighlight">\(r = .91\)</span> says at all.</p>
<p>How should we address this? Actually, it’s really easy: if we’re looking for ordinal relationships, all we have to do is treat the data as if it were ordinal scale! So, instead of measuring effort in terms of “hours worked”, lets rank all 10 of our students in order of hours worked. That is, student 1 did the least work out of anyone (2 hours) so they get the lowest rank (rank = 1). Student 4 was the next laziest, putting in only  6 hours of work in over the whole semester, so they get the next lowest rank (rank = 2). Notice that I’m using “rank = 1” to mean “low rank”. Sometimes in everyday language we talk about “rank = 1” to mean “top rank” rather than “bottom rank”. So be careful: you can rank “from smallest value to largest value” (i.e., small equals rank 1) or you can rank “from largest value to smallest value” (i.e., large equals rank 1). In this case, I’m ranking from smallest to largest, because that is how Python does it. But in real life, it’s really easy to forget which way you set things up, so you have to put a bit of effort into remembering!</p>
<p>Okay, so let’s have a look at our students when we rank them from worst to best in terms of effort and reward:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:center head"><p></p></th>
<th class="text-align:center head"><p>rank (hours worked)</p></th>
<th class="text-align:center head"><p>rank (grade received)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:center"><p>student 1</p></td>
<td class="text-align:center"><p>1</p></td>
<td class="text-align:center"><p>1</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>student 2</p></td>
<td class="text-align:center"><p>10</p></td>
<td class="text-align:center"><p>10</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>student 3</p></td>
<td class="text-align:center"><p>6</p></td>
<td class="text-align:center"><p>6</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>student 4</p></td>
<td class="text-align:center"><p>2</p></td>
<td class="text-align:center"><p>2</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>student 5</p></td>
<td class="text-align:center"><p>3</p></td>
<td class="text-align:center"><p>3</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>student 6</p></td>
<td class="text-align:center"><p>5</p></td>
<td class="text-align:center"><p>5</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>student 7</p></td>
<td class="text-align:center"><p>4</p></td>
<td class="text-align:center"><p>4</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>student 8</p></td>
<td class="text-align:center"><p>8</p></td>
<td class="text-align:center"><p>8</p></td>
</tr>
<tr class="row-even"><td class="text-align:center"><p>student 9</p></td>
<td class="text-align:center"><p>7</p></td>
<td class="text-align:center"><p>7</p></td>
</tr>
<tr class="row-odd"><td class="text-align:center"><p>student 10</p></td>
<td class="text-align:center"><p>9</p></td>
<td class="text-align:center"><p>9</p></td>
</tr>
</tbody>
</table>
<p>Hm. These are <em>identical</em>. The student who put in the most effort got the best grade, the student with the least effort got the worst grade, etc. We can get Python to construct new variables with these rankings using the <code class="docutils literal notranslate"><span class="pre">rank()</span></code> method, and specifiying which columns in our dataframe we want to rank, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ranked_hours</span> <span class="o">=</span> <span class="n">effort</span><span class="p">[</span><span class="s1">&#39;hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
<span class="n">ranked_grades</span> <span class="o">=</span> <span class="n">effort</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rank</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>As the table above shows, these two rankings are identical, so if we now correlate them we get a perfect relationship:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ranked_hours</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">ranked_grades</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.9999999999999999
</pre></div>
</div>
</div>
</div>
<p>What we’ve just re-invented is <strong><em>Spearman’s rank order correlation</em></strong>, usually denoted <span class="math notranslate nohighlight">\(\rho\)</span> to distinguish it from the Pearson correlation <span class="math notranslate nohighlight">\(r\)</span>. We can calculate Spearman’s <span class="math notranslate nohighlight">\(\rho\)</span> using R in two different ways. Firstly we could do it the way I just showed, using the <code class="docutils literal notranslate"><span class="pre">rank()</span></code> function to construct the rankings, and then calculate the Pearson correlation on these ranks. However, that’s way too much effort to do every time. It’s much easier to just specify the <code class="docutils literal notranslate"><span class="pre">method</span></code> argument of the <code class="docutils literal notranslate"><span class="pre">cor()</span></code> method. <a class="footnote-reference brackets" href="#note14" id="id24">18</a> Since we are skipping the extra step of “manually” creating new, ranked variables, we can just operate directly on the dataframe columns:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">effort</span><span class="p">[</span><span class="s1">&#39;hours&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">effort</span><span class="p">[</span><span class="s1">&#39;grade&#39;</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;spearman&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.9999999999999999
</pre></div>
</div>
</div>
</div>
<p>The default value of the <code class="docutils literal notranslate"><span class="pre">method</span></code> argument is <code class="docutils literal notranslate"><span class="pre">&quot;pearson&quot;</span></code>, which is why we didn’t have to specify it earlier on when we were doing Pearson correlations, although we could have, for extra clarity.</p>
</div>
</div>
<div class="section" id="handling-missing-values">
<span id="missing"></span><h2><span class="section-number">5.7. </span>Handling missing values<a class="headerlink" href="#handling-missing-values" title="Permalink to this headline">¶</a></h2>
<p>There’s one last topic that I want to discuss briefly in this chapter, and that’s the issue of <strong><em>missing data</em></strong>. Real data sets very frequently turn out to have missing values: perhaps someone forgot to fill in a particular survey question, for instance. Missing data can be the source of a lot of tricky issues, most of which I’m going to gloss over. However, at a minimum, you need to understand the basics of handling missing data in Python.</p>
<div class="section" id="the-single-variable-case">
<h3><span class="section-number">5.7.1. </span>The single variable case<a class="headerlink" href="#the-single-variable-case" title="Permalink to this headline">¶</a></h3>
<p>Let’s start with the simplest case, in which you’re trying to calculate descriptive statistics for a single variable which has missing data. In Python, this means that there will be <code class="docutils literal notranslate"><span class="pre">nan</span></code> (“not a number”) values in your data vector. Let’s create a variable like that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">partial</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">),</span> <span class="mi">30</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s assume that you want to calculate the mean of this variable. By default, Python assumes that you want to calculate the mean using all four elements of this vector, which is probably the safest thing for a dumb automaton to do, but it’s rarely what you actually want. Why not? Well, remember that although <code class="docutils literal notranslate"><span class="pre">nan</span></code> stands for “not a number”, the more accurate interpretation of <code class="docutils literal notranslate"><span class="pre">nan</span></code> here is “There should be a number here, but I don’t know what that number is”. This means that <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">+</span> <span class="pre">nan</span> <span class="pre">=</span> <span class="pre">nan</span></code>: if I add 1 to some number that I don’t know (i.e., the <code class="docutils literal notranslate"><span class="pre">nan</span></code>) then the answer is <em>also</em> a number that I don’t know. As a consequence, if you don’t explicitly tell Python to ignore the <code class="docutils literal notranslate"><span class="pre">nan</span></code> values, and the data set does have missing values, then the output will itself be a missing value. If I try to calculate the mean of the <code class="docutils literal notranslate"><span class="pre">partial</span></code> vector, without doing anything about the missing value, here’s what happens:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">statistics</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">partial</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>nan
</pre></div>
</div>
</div>
</div>
<p>Technically correct, but deeply unhelpful. There are a few ways to deal with this. The first is to use methods from <code class="docutils literal notranslate"><span class="pre">numpy</span></code>. <code class="docutils literal notranslate"><span class="pre">numpy</span></code> has a collection of methods to calculate nan-friendly versions of your favorite descriptive statistics (although correlation is a special case, more on that below), such as <code class="docutils literal notranslate"><span class="pre">nanmean</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmedian</span></code>, <code class="docutils literal notranslate"><span class="pre">nanpercentile</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmax</span></code>, <code class="docutils literal notranslate"><span class="pre">nanmin</span></code>, <code class="docutils literal notranslate"><span class="pre">nansum</span></code>, <code class="docutils literal notranslate"><span class="pre">nanstd</span></code>, etc. So:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">partial</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">partial</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">(</span><span class="n">partial</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20.0
20.0
8.16496580927726
</pre></div>
</div>
</div>
</div>
<p>This is great! Now we can get the descriptive statistics we want, without those pesky <code class="docutils literal notranslate"><span class="pre">nan</span></code>s getting in the way. Still, it is a little tedious to need to remember to to use the <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> version of these functions when dealing with data containing <code class="docutils literal notranslate"><span class="pre">nan</span></code>s (which real data sets often do). As a bit of a consolation, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframes can already calculate these statistics for us, and ignore <code class="docutils literal notranslate"><span class="pre">nan</span></code>s by default. So, if we put our data in a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> dataframe, we don’t need to worry about it:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;var1&#39;</span><span class="p">:</span> <span class="n">partial</span><span class="p">,</span>
     <span class="s1">&#39;var2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">),</span> <span class="mi">35</span><span class="p">],</span>
     <span class="s1">&#39;var3&#39;</span><span class="p">:</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">),</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">27</span><span class="p">]</span>
    <span class="p">})</span> 

<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>var1</th>
      <th>var2</th>
      <th>var3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10.0</td>
      <td>10.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>20.0</td>
      <td>NaN</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>18.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>30.0</td>
      <td>35.0</td>
      <td>27.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;var1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;var1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;var1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>20.0
20.0
10.0
</pre></div>
</div>
</div>
</div>
<p>This is also great, but there is one little niggling problem. <code class="docutils literal notranslate"><span class="pre">var1</span></code> in our dataframe is the same as the <code class="docutils literal notranslate"><span class="pre">partial</span></code> variable we defined earlier. The mean and median values look the same as when we used the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> methods, but the standard deviation is little bit different. What’s up with that? As it turns out, <code class="docutils literal notranslate"><span class="pre">numpy</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas</span></code> calculate standard deviation in slightly different ways: <code class="docutils literal notranslate"><span class="pre">numpy</span></code> uses <span class="math notranslate nohighlight">\(N\)</span> in the demoninator, while <code class="docutils literal notranslate"><span class="pre">pandas</span></code> uses the “unbiased estimator” <span class="math notranslate nohighlight">\(N-1\)</span> in the demoniator. To make <code class="docutils literal notranslate"><span class="pre">numpy</span></code> behave like <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, we need to pass the <code class="docutils literal notranslate"><span class="pre">ddof=1</span></code> argument to <code class="docutils literal notranslate"><span class="pre">nanmean()</span></code>, like so:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;var1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanstd</span><span class="p">(</span><span class="n">partial</span><span class="p">,</span> <span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10.0
10.0
</pre></div>
</div>
</div>
</div>
<p>and all is well!</p>
<p>Notice that the mean is <code class="docutils literal notranslate"><span class="pre">20</span></code>  (i.e., <code class="docutils literal notranslate"><span class="pre">60</span> <span class="pre">/</span> <span class="pre">3</span></code>) and <em>not</em> <code class="docutils literal notranslate"><span class="pre">15</span></code>. When Python ignores an <code class="docutils literal notranslate"><span class="pre">nan</span></code> value, it genuinely ignores it. In effect, the calculation above is identical to what you’d get if you asked for the mean of the three-element vector <code class="docutils literal notranslate"><span class="pre">[10,</span> <span class="pre">20,</span> <span class="pre">30]</span></code>. This is also why the mean and the median are the same in this case.</p>
</div>
<div class="section" id="missing-values-in-pairwise-calculations">
<h3><span class="section-number">5.7.2. </span>Missing values in pairwise calculations<a class="headerlink" href="#missing-values-in-pairwise-calculations" title="Permalink to this headline">¶</a></h3>
<p>I mentioned earlier that the correlation is a special case. It doesn’t have an <code class="docutils literal notranslate"><span class="pre">np.nancorr</span></code> argument, because the story becomes a lot more complicated when more than one variable is involved. To explore this, lets look at the data in <code class="docutils literal notranslate"><span class="pre">parenthood2.csv</span></code>. This is just like the <code class="docutils literal notranslate"><span class="pre">parenthood</span></code> data from before, but with some missing values introducd. Maybe I was just too tired some mornings to record the baby’s hours of sleep, or to measure my own grumpiness. It happens.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">file</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/ethanweed/pythonbook/main/Data/parenthood2.csv&#39;</span>

<span class="n">parenthood2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="n">parenthood2</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan.sleep</th>
      <th>baby.sleep</th>
      <th>dan.grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7.59</td>
      <td>NaN</td>
      <td>56.0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7.91</td>
      <td>11.66</td>
      <td>60.0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>5.14</td>
      <td>7.92</td>
      <td>82.0</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7.71</td>
      <td>9.61</td>
      <td>55.0</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6.68</td>
      <td>9.75</td>
      <td>NaN</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can see some of those pesky <code class="docutils literal notranslate"><span class="pre">nan</span></code>s right in the first 5 rows, and if we <code class="docutils literal notranslate"><span class="pre">describe()</span></code> our data, we can get a feeling for how many there are:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parenthood2</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan.sleep</th>
      <th>baby.sleep</th>
      <th>dan.grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>91.000000</td>
      <td>89.000000</td>
      <td>92.000000</td>
      <td>100.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>6.976923</td>
      <td>8.114494</td>
      <td>63.152174</td>
      <td>50.500000</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.020409</td>
      <td>2.046821</td>
      <td>9.851574</td>
      <td>29.011492</td>
    </tr>
    <tr>
      <th>min</th>
      <td>4.840000</td>
      <td>3.250000</td>
      <td>41.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>6.285000</td>
      <td>6.460000</td>
      <td>56.000000</td>
      <td>25.750000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>7.030000</td>
      <td>8.200000</td>
      <td>61.000000</td>
      <td>50.500000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>7.785000</td>
      <td>9.610000</td>
      <td>70.250000</td>
      <td>75.250000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>9.000000</td>
      <td>12.070000</td>
      <td>89.000000</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>By looking in the <code class="docutils literal notranslate"><span class="pre">count</span></code> row, we can see that out of the 100 days for which we have data, there are 9 days missing for <code class="docutils literal notranslate"><span class="pre">dan.sleep</span></code>, 11 days missing for <code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code> and eight days missing for <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code>. Suppose what I would like is a correlation matrix. And let’s also suppose that I don’t bother to tell Python how to handle those missing values. Here’s what happens:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parenthood2</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan.sleep</th>
      <th>baby.sleep</th>
      <th>dan.grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>dan.sleep</th>
      <td>1.000000</td>
      <td>0.614723</td>
      <td>-0.903442</td>
      <td>-0.076797</td>
    </tr>
    <tr>
      <th>baby.sleep</th>
      <td>0.614723</td>
      <td>1.000000</td>
      <td>-0.567803</td>
      <td>0.058309</td>
    </tr>
    <tr>
      <th>dan.grump</th>
      <td>-0.903442</td>
      <td>-0.567803</td>
      <td>1.000000</td>
      <td>0.005833</td>
    </tr>
    <tr>
      <th>day</th>
      <td>-0.076797</td>
      <td>0.058309</td>
      <td>0.005833</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This actually looks pretty good! We <em>know</em> there are <code class="docutils literal notranslate"><span class="pre">nan</span></code>s in the data, but <code class="docutils literal notranslate"><span class="pre">pandas</span></code> seems to deal with them handily. This is not untrue, but there is a small but important detail to be aware of. When it encounters data with <code class="docutils literal notranslate"><span class="pre">nan</span></code>s, <code class="docutils literal notranslate"><span class="pre">pandas</span></code> only looks at the pair of variables that it’s trying to correlate when determining what to drop. So, for instance, since the only missing value for observation 1 of <code class="docutils literal notranslate"><span class="pre">parenthood2</span></code> is for <code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code>, Python will only drop observation 1 when <code class="docutils literal notranslate"><span class="pre">baby.sleep</span></code> is one of the variables involved, and keeps observation 1 when trying to correlate e.g. <code class="docutils literal notranslate"><span class="pre">dan.sleep</span></code> and <code class="docutils literal notranslate"><span class="pre">dan.grump</span></code>. If we want to simply ignore <em>all</em> rows that contain a <code class="docutils literal notranslate"><span class="pre">nan</span></code>, we need to tell <code class="docutils literal notranslate"><span class="pre">pandas</span></code> to drop them, like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parenthood2</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dan.sleep</th>
      <th>baby.sleep</th>
      <th>dan.grump</th>
      <th>day</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>dan.sleep</th>
      <td>1.000000</td>
      <td>0.639498</td>
      <td>-0.899515</td>
      <td>0.061329</td>
    </tr>
    <tr>
      <th>baby.sleep</th>
      <td>0.639498</td>
      <td>1.000000</td>
      <td>-0.586561</td>
      <td>0.145558</td>
    </tr>
    <tr>
      <th>dan.grump</th>
      <td>-0.899515</td>
      <td>-0.586561</td>
      <td>1.000000</td>
      <td>-0.068166</td>
    </tr>
    <tr>
      <th>day</th>
      <td>0.061329</td>
      <td>0.145558</td>
      <td>-0.068166</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>By checking the length of <code class="docutils literal notranslate"><span class="pre">parenthood2</span></code> and <code class="docutils literal notranslate"><span class="pre">parenthood2.dropna()</span></code>, we can see that using <code class="docutils literal notranslate"><span class="pre">dropna()</span></code> removes 27 entire rows from our data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parenthood2</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parenthood2</span><span class="o">.</span><span class="n">dropna</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100
73
</pre></div>
</div>
</div>
</div>
<p>The results from <code class="docutils literal notranslate"><span class="pre">parenthood2.corr()</span></code> and <code class="docutils literal notranslate"><span class="pre">parenthood2.dropna().corr()</span></code> are similar, but not quite the same. The two approaches have different strengths and weaknesses. The “pairwise” approach, the one in which Python only drops observations when they are involved in the comparison at hand, has the advantage that it keeps more observations, so you’re making use of more of your data and (as we’ll discuss in tedious detail in the chapter on <a class="reference internal" href="04.03-estimation.html#estimation"><span class="std std-ref">estimation</span></a>) this improves the reliability of your estimated correlation. On the other hand, it means that every correlation in your correlation matrix is being computed from a slightly different set of observations, which can be awkward when you want to compare the different correlations that you’ve got.</p>
<p>So which method should you use? It depends a lot on <em>why</em> you think your values are missing, and probably depends a little on how paranoid you are. For instance, if you think that the missing values were “chosen” completely randomly <a class="footnote-reference brackets" href="#note15" id="id25">19</a> then you’ll probably want to use the pairwise method. If you think that missing data are a cue to thinking that the whole observation might be rubbish (e.g., someone just selecting arbitrary responses in your questionnaire), but that there’s no pattern to which observations are “rubbish”, then it’s probably safer to keep only those observations that are complete. If you think there’s something systematic going on, in that some observations are more likely to be missing than others, then you have a much trickier problem to solve, and one that is beyond the scope of this book.</p>
</div>
</div>
<div class="section" id="summary">
<h2><span class="section-number">5.8. </span>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculating some basic descriptive statistics is one of the very first things you do when analysing real data, and descriptive statistics are much simpler to understand than inferential statistics, so like every other statistics textbook I’ve started with descriptives. In this chapter, we talked about the following topics:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#central-tendency"><span class="std std-ref"><em>Measures of central tendency</em></span></a>. Broadly speaking, central tendency measures tell you where the data are. There’s three measures that are typically reported in the literature: the mean, median and mode.</p></li>
<li><p><a class="reference internal" href="#variability"><span class="std std-ref"><em>Measures of variability</em></span></a>. In contrast, measures of variability tell you about how “spread out” the data are. The key measures are: range, standard deviation, interquartile reange</p></li>
<li><p><a class="reference internal" href="#zcores"><span class="std std-ref"><em>Standard scores</em></span></a>. The <span class="math notranslate nohighlight">\(z\)</span>-score is a slightly unusual beast. It’s not quite a descriptive statistic, and not quite an inference. Make sure you understood this section: it’ll come up again later.</p></li>
<li><p><a class="reference internal" href="#correlations"><span class="std std-ref"><em>Correlations</em></span></a>. Want to know how strong the relationship is between two variables? Calculate a correlation.</p></li>
<li><p><a class="reference internal" href="#missing"><span class="std std-ref"><em>Missing data</em></span></a>. Dealing with missing data is one of those frustrating things that data analysts really wish the didn’t have to think about. In real life it can be hard to do well. For the purpose of this book, we only touched on the basics in this section.</p></li>
</ul>
<p>In the next section we’ll move on to a discussion of how to draw pictures! Everyone loves a pretty picture, right? But before we do, I want to end on an important point. A traditional first course in statistics spends only a small proportion of the class on descriptive statistics, maybe one or two lectures at most. The vast majority of the lecturer’s time is spent on inferential statistics, because that’s where all the hard stuff is. That makes sense, but it hides the practical everyday importance of choosing good descriptives. With that in mind…</p>
</div>
<div class="section" id="epilogue-good-descriptive-statistics-are-descriptive">
<h2><span class="section-number">5.9. </span>Epilogue: Good descriptive statistics are descriptive!<a class="headerlink" href="#epilogue-good-descriptive-statistics-are-descriptive" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p><em>The death of one man is a tragedy.
The death of millions is a statistic.</em></p>
<p>– Josef Stalin, Potsdam 1945</p>
</div></blockquote>
<blockquote>
<div><p><em>950,000 – 1,200,000</em></p>
<p>– Estimate of Soviet repression deaths,
1937-1938 (Ellman, 2002) <span id="id26">[<a class="reference internal" href="bibliography.html#id23" title="Michael Ellman. Soviet repression statistics: some comments. Europe-Asia Studies, 54(7):1151–1172, 2002.">Ellman, 2002</a>]</span></p>
</div></blockquote>
<p>Stalin’s infamous quote about the statistical character death of millions is worth giving some thought. The clear intent of his statement is that the death of an individual touches us personally and its force cannot be denied, but that the deaths of a multitude are incomprehensible, and as a consequence mere statistics, more easily ignored. I’d argue that Stalin was half right. A statistic is an abstraction, a description of events beyond our personal experience, and so hard to visualise. Few if any of us can imagine what the deaths of millions is “really” like, but we can imagine one death, and this gives the lone death its feeling of immediate tragedy, a feeling that is missing from Ellman’s cold statistical description.</p>
<p>Yet it is not so simple: without numbers, without counts, without a description of what happened, we have <em>no chance</em> of understanding what really happened, no opportunity event to try to summon the missing feeling. And in truth, as I write this, sitting in comfort on a Saturday morning, half a world and a whole lifetime away from the Gulags, when I put the Ellman estimate next to the Stalin quote a dull dread settles in my stomach and a chill settles over me. The Stalinist repression is something truly beyond my experience, but with a combination of statistical data and those recorded personal histories that have come down to us, it is not entirely beyond my comprehension. Because what Ellman’s numbers tell us is this: over a two year period, Stalinist repression wiped out the equivalent of every man, woman and child currently alive in the city where I live. Each one of those deaths had it’s own story, was it’s own tragedy, and only some of those are known to us now. Even so, with a few carefully chosen statistics, the scale of the atrocity starts to come into focus.</p>
<p>Thus it is no small thing to say that the first task of the statistician and the scientist is to summarise the data, to find some collection of numbers that can convey to an audience a sense of what has happened. This is the job of descriptive statistics, but it’s not a job that can be told solely using the numbers. You are a data analyst, not a statistical software package. Part of your job is to take these <em>statistics</em> and turn them into a <em>description</em>. When you analyse data, it is not sufficient to list off a collection of numbers. Always remember that what you’re really trying to do is communicate with a human audience. The numbers are important, but they need to be put together into a meaningful story that your audience can interpret. That means you need to think about framing. You need to think about context. And you need to think about the individual events that your statistics are summarising.</p>
<hr class="footnotes docutils" />
<dl class="footnote brackets">
<dt class="label" id="note1"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Note for non-Australians: the AFL is an Australian rules football competition. You don’t need to know anything about Australian rules in order to follow this section.</p>
</dd>
<dt class="label" id="note2"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>The choice to use <span class="math notranslate nohighlight">\(\Sigma\)</span> to denote summation isn’t arbitrary: it’s the Greek upper case letter sigma, which is the analogue of the letter S in that alphabet. Similarly, there’s an equivalent symbol used to denote the multiplication of lots of numbers: because multiplications are also called “products”, we use the <span class="math notranslate nohighlight">\(\Pi\)</span> symbol for this; the Greek upper case pi, which is the analogue of the letter P.</p>
</dd>
<dt class="label" id="smartiepants"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>Or already knew, in which case you are probaby skipping this section and won’t read this anyway</p>
</dd>
<dt class="label" id="numb"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>Or, perhaps, you just get numb to the pain.</p>
</dd>
<dt class="label" id="note3"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">sort_values</span></code>is a <em>method</em> that belong to <code class="docutils literal notranslate"><span class="pre">pandas</span></code> <em>objects</em>. We’ll get back to this <a class="reference internal" href="03.03-pragmatic_matters.html#pandas"><span class="std std-ref">later</span></a>. For now, the important thing is that it works!</p>
</dd>
<dt class="label" id="note4"><span class="brackets"><a class="fn-backref" href="#id6">6</a></span></dt>
<dd><p>www.abc.net.au/news/stories/2010/09/24/3021480.htm</p>
</dd>
<dt class="label" id="note5"><span class="brackets"><a class="fn-backref" href="#id8">7</a></span></dt>
<dd><p>Or at least, the basic statistical theory – these days there is a whole subfield of statistics called <em>robust statistics</em> that tries to grapple with the messiness of real data and develop theory that can cope with it.</p>
</dd>
<dt class="label" id="note6"><span class="brackets"><a class="fn-backref" href="#id9">8</a></span></dt>
<dd><p>Here I use the <code class="docutils literal notranslate"><span class="pre">stats</span></code> function from the <code class="docutils literal notranslate"><span class="pre">scipy</span></code> module. But <code class="docutils literal notranslate"><span class="pre">stats</span></code> is picky, it only wants to deal with data in a certain format called <code class="docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">arrays</span></code>. So, to give it what it wants, we also need to import <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, and then convert our data into an <code class="docutils literal notranslate"><span class="pre">array</span></code>. Also I only imported part of the <code class="docutils literal notranslate"><span class="pre">scipy</span></code> module (you can do that) and renamed the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> module. You can do that too, but this footnote is already getting much too long. We’ll get back to these things and much more in <a class="reference internal" href="02.01-getting_started_with_python.html#getting-started-with-python"><span class="std std-ref">Getting Started with Python</span></a>.</p>
</dd>
<dt class="label" id="note7"><span class="brackets"><a class="fn-backref" href="#id11">9</a></span></dt>
<dd><p>This is called a “0-1 loss function”, meaning that you either win (1) or you lose (0), with no middle ground.</p>
</dd>
<dt class="label" id="note8"><span class="brackets"><a class="fn-backref" href="#id13">10</a></span></dt>
<dd><p>Well, I will very briefly mention the one that I think is coolest, for a very particular definition of “cool”, that is. Variances are <em>additive</em>. Here’s what that means: suppose I have two variables <span class="math notranslate nohighlight">\(X\)</span> and <span class="math notranslate nohighlight">\(Y\)</span>, whose variances are <span class="math notranslate nohighlight">\(\mbox{Var}(X)\)</span> and <span class="math notranslate nohighlight">\(\mbox{Var}(Y)\)</span> respectively. Now imagine I want to define a new variable <span class="math notranslate nohighlight">\(Z\)</span> that is the sum of the two, <span class="math notranslate nohighlight">\(Z = X+Y\)</span>. As it turns out, the variance of <span class="math notranslate nohighlight">\(Z\)</span> is equal to <span class="math notranslate nohighlight">\(\mbox{Var}(X) + \mbox{Var}(Y)\)</span>. This is a <em>very</em> useful property, but it’s not true of the other measures that I talk about in this section.</p>
</dd>
<dt class="label" id="note9"><span class="brackets"><a class="fn-backref" href="#id14">11</a></span></dt>
<dd><p>With the possible exception of the third question.</p>
</dd>
<dt class="label" id="note10"><span class="brackets"><a class="fn-backref" href="#id15">12</a></span></dt>
<dd><p>Strictly, the assumption is that the data are <em>normally</em> distributed, which is an important concept that we’ll discuss more in the chapter <a class="reference internal" href="04.02-probability.html#probability"><span class="std std-ref">Introduction to Probability</span></a>, and will turn up over and over again later in the book.</p>
</dd>
<dt class="label" id="note-kurtosis"><span class="brackets"><a class="fn-backref" href="#id17">13</a></span></dt>
<dd><p>The “<span class="math notranslate nohighlight">\(-3\)</span>” part is something that statisticians tack on to ensure that the normal curve has kurtosis zero. It looks a bit stupid, just sticking a “-3” at the end of the formula, but there are good mathematical reasons for doing this.</p>
</dd>
<dt class="label" id="note11"><span class="brackets"><a class="fn-backref" href="#id18">14</a></span></dt>
<dd><p>Though some caution is usually warranted. It’s not always the case that one standard deviation on variable A corresponds to the same “kind” of thing as one standard deviation on variable B. Use common sense when trying to determine whether or not the <span class="math notranslate nohighlight">\(z\)</span> scores of two variables can be meaningfully compared.</p>
</dd>
<dt class="label" id="note12"><span class="brackets"><a class="fn-backref" href="#id20">15</a></span></dt>
<dd><p>Actually, even that table is more than I’d bother with. In practice most people pick <em>one</em> measure of central tendency, and <em>one</em> measure of variability only.</p>
</dd>
<dt class="label" id="note-covariance"><span class="brackets"><a class="fn-backref" href="#id21">16</a></span></dt>
<dd><p>Just like we saw with the variance and the standard deviation, in practice we divide by <span class="math notranslate nohighlight">\(N-1\)</span> rather than <span class="math notranslate nohighlight">\(N\)</span>.</p>
</dd>
<dt class="label" id="note13"><span class="brackets"><a class="fn-backref" href="#id22">17</a></span></dt>
<dd><p>If you are reading this after having already completed the chapter on <a class="reference internal" href="04.04-hypothesis-testing.html#hypothesis-testing"><span class="std std-ref">hypothesis testing</span></a> you might be wondering about hypothesis tests for correlations. This can be done with <code class="docutils literal notranslate"><span class="pre">scipy.stats.pearsonr</span></code> (or <code class="docutils literal notranslate"><span class="pre">scipy.stats.spearmanr</span></code>).</p>
</dd>
<dt class="label" id="note14"><span class="brackets"><a class="fn-backref" href="#id24">18</a></span></dt>
<dd><p>Yikes, that’s two uses of the word method, and they mean different things. Sigh. Language is hard, and things get confusing when code-switching between human language and computer language!</p>
</dd>
<dt class="label" id="note15"><span class="brackets"><a class="fn-backref" href="#id25">19</a></span></dt>
<dd><p>The technical term here is “missing completely at random” (often written MCAR for short). Makes sense, I suppose, but it does sound ungrammatical to me.</p>
</dd>
</dl>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="02.02-more_python_concepts.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">4. </span>More Python Concepts</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="03.02-drawing_graphs.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6. </span>Drawing Graphs</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Danielle Navarro and Ethan Weed<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>